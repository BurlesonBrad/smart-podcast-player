/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     (c) 2010-2011 Jeremy Ashkenas, DocumentCloud Inc.

//     (c) 2011-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors

//     Backbone may be freely distributed under the MIT license.

// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.

// Distributed under MIT license

/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */

/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20131201
 */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */

/*!
 * jScrollPane - v2.0.19 - 2013-11-16
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2013 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */

// Copyright (c) 2013 Kelvin Luck

// Dual licensed under the MIT or GPL Version 2 licenses.

!function(){function e(e,t,n){e.fn.jScrollPane||(e.fn.jScrollPane=function(i){function s(i,s){function a(t){var s,o,p,c,d,h,g=!1,v=!1;if(q=t,V===n)d=i.scrollTop(),h=i.scrollLeft(),i.css({overflow:"hidden",padding:0}),z=i.innerWidth()+_t,N=i.innerHeight(),i.width(z),V=e('<div class="jspPane" />').css("padding",yt).append(i.children()),U=e('<div class="jspContainer" />').css({width:z+"px",height:N+"px"}).append(V).appendTo(i);else{if(i.css("width",""),g=q.stickToBottom&&O(),v=q.stickToRight&&E(),c=i.innerWidth()+_t!=z||i.outerHeight()!=N,c&&(z=i.innerWidth()+_t,N=i.innerHeight(),U.css({width:z+"px",height:N+"px"})),!c&&wt==W&&V.outerHeight()==X)return void i.width(z);wt=W,V.css("width",""),i.width(z),U.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}V.css("overflow","auto"),W=t.contentWidth?t.contentWidth:V[0].scrollWidth,X=V[0].scrollHeight,V.css("overflow",""),Q=W/z,Y=X/N,J=Y>1,K=Q>1,K||J?(i.addClass("jspScrollable"),s=q.maintainPosition&&(et||it),s&&(o=x(),p=T()),r(),l(),u(),s&&(P(v?W-z:o,!1),C(g?X-N:p,!1)),I(),j(),B(),q.enableKeyboardNavigation&&$(),q.clickOnTrack&&f(),H(),q.hijackInternalLinks&&D()):(i.removeClass("jspScrollable"),V.css({top:0,left:0,width:U.width()-_t}),A(),R(),L(),m()),q.autoReinitialise&&!vt?vt=setInterval(function(){a(q)},q.autoReinitialiseDelay):!q.autoReinitialise&&vt&&clearInterval(vt),d&&i.scrollTop(0)&&C(d,!1),h&&i.scrollLeft(0)&&P(h,!1),i.trigger("jsp-initialised",[K||J])}function r(){J&&(U.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),st=U.find(">.jspVerticalBar"),at=st.find(">.jspTrack"),G=at.find(">.jspDrag"),q.showArrows&&(pt=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",d(0,-1)).bind("click.jsp",S),ut=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",d(0,1)).bind("click.jsp",S),q.arrowScrollOnHover&&(pt.bind("mouseover.jsp",d(0,-1,pt)),ut.bind("mouseover.jsp",d(0,1,ut))),c(at,q.verticalArrowPositions,pt,ut)),ot=N,U.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ot-=e(this).outerHeight()}),G.hover(function(){G.addClass("jspHover")},function(){G.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",S),G.addClass("jspActive");var n=t.pageY-G.position().top;return e("html").bind("mousemove.jsp",function(e){v(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),o())}function o(){at.height(ot+"px"),et=0,rt=q.verticalGutter+at.outerWidth(),V.width(z-rt-_t);try{0===st.position().left&&V.css("margin-left",rt+"px")}catch(e){}}function l(){K&&(U.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),ct=U.find(">.jspHorizontalBar"),dt=ct.find(">.jspTrack"),tt=dt.find(">.jspDrag"),q.showArrows&&(mt=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",d(-1,0)).bind("click.jsp",S),gt=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",d(1,0)).bind("click.jsp",S),q.arrowScrollOnHover&&(mt.bind("mouseover.jsp",d(-1,0,mt)),gt.bind("mouseover.jsp",d(1,0,gt))),c(dt,q.horizontalArrowPositions,mt,gt)),tt.hover(function(){tt.addClass("jspHover")},function(){tt.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",S),tt.addClass("jspActive");var n=t.pageX-tt.position().left;return e("html").bind("mousemove.jsp",function(e){_(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),ht=U.innerWidth(),p())}function p(){U.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ht-=e(this).outerWidth()}),dt.width(ht+"px"),it=0}function u(){if(K&&J){var t=dt.outerHeight(),n=at.outerWidth();ot-=t,e(ct).find(">.jspCap:visible,>.jspArrow").each(function(){ht+=e(this).outerWidth()}),ht-=n,N-=n,z-=t,dt.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),o(),p()}K&&V.width(U.outerWidth()-_t+"px"),X=V.outerHeight(),Y=X/N,K&&(ft=Math.ceil(1/Q*ht),ft>q.horizontalDragMaxWidth?ft=q.horizontalDragMaxWidth:ft<q.horizontalDragMinWidth&&(ft=q.horizontalDragMinWidth),tt.width(ft+"px"),nt=ht-ft,w(it)),J&&(lt=Math.ceil(1/Y*ot),lt>q.verticalDragMaxHeight?lt=q.verticalDragMaxHeight:lt<q.verticalDragMinHeight&&(lt=q.verticalDragMinHeight),G.height(lt+"px"),Z=ot-lt,y(et))}function c(e,t,n,i){var s,a="before",r="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==a?r=t:t==r&&(a=t,s=n,n=i,i=s),e[a](n)[r](i)}function d(e,t,n){return function(){return h(e,t,this,n),this.blur(),!1}}function h(t,n,i,s){i=e(i).addClass("jspActive");var a,r,o=!0,l=function(){0!==t&&bt.scrollByX(t*q.arrowButtonSpeed),0!==n&&bt.scrollByY(n*q.arrowButtonSpeed),r=setTimeout(l,o?q.initialDelay:q.arrowRepeatFreq),o=!1};l(),a=s?"mouseout.jsp":"mouseup.jsp",s=s||e("html"),s.bind(a,function(){i.removeClass("jspActive"),r&&clearTimeout(r),r=null,s.unbind(a)})}function f(){m(),J&&at.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var i,s=e(this),a=s.offset(),r=t.pageY-a.top-et,o=!0,l=function(){var e=s.offset(),n=t.pageY-e.top-lt/2,a=N*q.scrollPagePercent,u=Z*a/(X-N);if(0>r)et-u>n?bt.scrollByY(-a):v(n);else{if(!(r>0))return void p();n>et+u?bt.scrollByY(a):v(n)}i=setTimeout(l,o?q.initialDelay:q.trackClickRepeatFreq),o=!1},p=function(){i&&clearTimeout(i),i=null,e(document).unbind("mouseup.jsp",p)};return l(),e(document).bind("mouseup.jsp",p),!1}}),K&&dt.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var i,s=e(this),a=s.offset(),r=t.pageX-a.left-it,o=!0,l=function(){var e=s.offset(),n=t.pageX-e.left-ft/2,a=z*q.scrollPagePercent,u=nt*a/(W-z);if(0>r)it-u>n?bt.scrollByX(-a):_(n);else{if(!(r>0))return void p();n>it+u?bt.scrollByX(a):_(n)}i=setTimeout(l,o?q.initialDelay:q.trackClickRepeatFreq),o=!1},p=function(){i&&clearTimeout(i),i=null,e(document).unbind("mouseup.jsp",p)};return l(),e(document).bind("mouseup.jsp",p),!1}})}function m(){dt&&dt.unbind("mousedown.jsp"),at&&at.unbind("mousedown.jsp")}function g(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),G&&G.removeClass("jspActive"),tt&&tt.removeClass("jspActive")}function v(e,t){J&&(0>e?e=0:e>Z&&(e=Z),t===n&&(t=q.animateScroll),t?bt.animate(G,"top",e,y):(G.css("top",e),y(e)))}function y(e){e===n&&(e=G.position().top),U.scrollTop(0),et=e;var t=0===et,s=et==Z,a=e/Z,r=-a*(X-N);(kt!=t||Pt!=s)&&(kt=t,Pt=s,i.trigger("jsp-arrow-change",[kt,Pt,Ct,Mt])),b(t,s),V.css("top",r),i.trigger("jsp-scroll-y",[-r,t,s]).trigger("scroll")}function _(e,t){K&&(0>e?e=0:e>nt&&(e=nt),t===n&&(t=q.animateScroll),t?bt.animate(tt,"left",e,w):(tt.css("left",e),w(e)))}function w(e){e===n&&(e=tt.position().left),U.scrollTop(0),it=e;var t=0===it,s=it==nt,a=e/nt,r=-a*(W-z);(Ct!=t||Mt!=s)&&(Ct=t,Mt=s,i.trigger("jsp-arrow-change",[kt,Pt,Ct,Mt])),k(t,s),V.css("left",r),i.trigger("jsp-scroll-x",[-r,t,s]).trigger("scroll")}function b(e,t){q.showArrows&&(pt[e?"addClass":"removeClass"]("jspDisabled"),ut[t?"addClass":"removeClass"]("jspDisabled"))}function k(e,t){q.showArrows&&(mt[e?"addClass":"removeClass"]("jspDisabled"),gt[t?"addClass":"removeClass"]("jspDisabled"))}function C(e,t){var n=e/(X-N);v(n*Z,t)}function P(e,t){var n=e/(W-z);_(n*nt,t)}function M(t,n,i){var s,a,r,o,l,p,u,c,d,h=0,f=0;try{s=e(t)}catch(m){return}for(a=s.outerHeight(),r=s.outerWidth(),U.scrollTop(0),U.scrollLeft(0);!s.is(".jspPane");)if(h+=s.position().top,f+=s.position().left,s=s.offsetParent(),/^body|html$/i.test(s[0].nodeName))return;o=T(),p=o+N,o>h||n?c=h-q.horizontalGutter:h+a>p&&(c=h-N+a+q.horizontalGutter),isNaN(c)||C(c,i),l=x(),u=l+z,l>f||n?d=f-q.horizontalGutter:f+r>u&&(d=f-z+r+q.horizontalGutter),isNaN(d)||P(d,i)}function x(){return-V.position().left}function T(){return-V.position().top}function O(){var e=X-N;return e>20&&e-T()<10}function E(){var e=W-z;return e>20&&e-x()<10}function j(){U.unbind(Tt).bind(Tt,function(e,t,n,i){var s=it,a=et,r=e.deltaFactor||q.mouseWheelSpeed;return bt.scrollBy(n*r,-i*r,!1),s==it&&a==et})}function A(){U.unbind(Tt)}function S(){return!1}function I(){V.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){M(e.target,!1)})}function R(){V.find(":input,a").unbind("focus.jsp")}function $(){function t(){var e=it,t=et;switch(n){case 40:bt.scrollByY(q.keyboardSpeed,!1);break;case 38:bt.scrollByY(-q.keyboardSpeed,!1);break;case 34:case 32:bt.scrollByY(N*q.scrollPagePercent,!1);break;case 33:bt.scrollByY(-N*q.scrollPagePercent,!1);break;case 39:bt.scrollByX(q.keyboardSpeed,!1);break;case 37:bt.scrollByX(-q.keyboardSpeed,!1)}return s=e!=it||t!=et}var n,s,a=[];K&&a.push(ct[0]),J&&a.push(st[0]),V.focus(function(){i.focus()}),i.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(i){if(i.target===this||a.length&&e(i.target).closest(a).length){var r=it,o=et;switch(i.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=i.keyCode,t();break;case 35:C(X-N),n=null;break;case 36:C(0),n=null}return s=i.keyCode==n&&r!=it||o!=et,!s}}).bind("keypress.jsp",function(e){return e.keyCode==n&&t(),!s}),q.hideFocus?(i.css("outline","none"),"hideFocus"in U[0]&&i.attr("hideFocus",!0)):(i.css("outline",""),"hideFocus"in U[0]&&i.attr("hideFocus",!1))}function L(){i.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function H(){if(location.hash&&location.hash.length>1){var t,n,i=escape(location.hash.substr(1));try{t=e("#"+i+', a[name="'+i+'"]')}catch(s){return}t.length&&V.find(i)&&(0===U.scrollTop()?n=setInterval(function(){U.scrollTop()>0&&(M(t,!0),e(document).scrollTop(U.position().top),clearInterval(n))},50):(M(t,!0),e(document).scrollTop(U.position().top)))}}function D(){e(document.body).data("jspHijack")||(e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(n){var i,s,a,r,o,l,p=this.href.substr(0,this.href.indexOf("#")),u=location.href;if(-1!==location.href.indexOf("#")&&(u=location.href.substr(0,location.href.indexOf("#"))),p===u){i=escape(this.href.substr(this.href.indexOf("#")+1));try{s=e("#"+i+', a[name="'+i+'"]')}catch(c){return}s.length&&(a=s.closest(".jspScrollable"),r=a.data("jsp"),r.scrollToElement(s,!0),a[0].scrollIntoView&&(o=e(t).scrollTop(),l=s.offset().top,(o>l||l>o+e(t).height())&&a[0].scrollIntoView()),n.preventDefault())}}))}function B(){var e,t,n,i,s,a=!1;U.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var o=r.originalEvent.touches[0];e=x(),t=T(),n=o.pageX,i=o.pageY,s=!1,a=!0}).bind("touchmove.jsp",function(r){if(a){var o=r.originalEvent.touches[0],l=it,p=et;return bt.scrollTo(e+n-o.pageX,t+i-o.pageY),s=s||Math.abs(n-o.pageX)>5||Math.abs(i-o.pageY)>5,l==it&&p==et}}).bind("touchend.jsp",function(){a=!1}).bind("click.jsp-touchclick",function(){return s?(s=!1,!1):void 0})}function F(){var e=T(),t=x();i.removeClass("jspScrollable").unbind(".jsp"),i.replaceWith(xt.append(V.children())),xt.scrollTop(e),xt.scrollLeft(t),vt&&clearInterval(vt)}var q,V,z,N,U,W,X,Q,Y,J,K,G,Z,et,tt,nt,it,st,at,rt,ot,lt,pt,ut,ct,dt,ht,ft,mt,gt,vt,yt,_t,wt,bt=this,kt=!0,Ct=!0,Pt=!1,Mt=!1,xt=i.clone(!1,!1).empty(),Tt=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===i.css("box-sizing")?(yt=0,_t=0):(yt=i.css("paddingTop")+" "+i.css("paddingRight")+" "+i.css("paddingBottom")+" "+i.css("paddingLeft"),_t=(parseInt(i.css("paddingLeft"),10)||0)+(parseInt(i.css("paddingRight"),10)||0)),e.extend(bt,{reinitialise:function(t){t=e.extend({},q,t),a(t)},scrollToElement:function(e,t,n){M(e,t,n)},scrollTo:function(e,t,n){P(e,n),C(t,n)},scrollToX:function(e,t){P(e,t)},scrollToY:function(e,t){C(e,t)},scrollToPercentX:function(e,t){P(e*(W-z),t)},scrollToPercentY:function(e,t){C(e*(X-N),t)},scrollBy:function(e,t,n){bt.scrollByX(e,n),bt.scrollByY(t,n)},scrollByX:function(e,t){var n=x()+Math[0>e?"floor":"ceil"](e),i=n/(W-z);_(i*nt,t)},scrollByY:function(e,t){var n=T()+Math[0>e?"floor":"ceil"](e),i=n/(X-N);v(i*Z,t)},positionDragX:function(e,t){_(e,t)},positionDragY:function(e,t){v(e,t)},animate:function(e,t,n,i){var s={};s[t]=n,e.animate(s,{duration:q.animateDuration,easing:q.animateEase,queue:!1,step:i})},getContentPositionX:function(){return x()},getContentPositionY:function(){return T()},getContentWidth:function(){return W},getContentHeight:function(){return X},getPercentScrolledX:function(){return x()/(W-z)},getPercentScrolledY:function(){return T()/(X-N)},getIsScrollableH:function(){return K},getIsScrollableV:function(){return J},getContentPane:function(){return V},scrollToBottom:function(e){v(Z,e)},hijackInternalLinks:e.noop,destroy:function(){F()}}),a(s)}return i=e.extend({},e.fn.jScrollPane.defaults,i),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){i[this]=i[this]||i.speed}),this.each(function(){var t=e(this),n=t.data("jsp");n?n.reinitialise(i):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),n=new s(t,i),t.data("jsp",n))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8})}function t(e){if(!e.fn.cssExtended){var t=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},n=!!CSSStyleDeclaration.prototype.getPropertyValue;n||(CSSStyleDeclaration.prototype.getPropertyValue=function(e){return this.getAttribute(e)},CSSStyleDeclaration.prototype.setProperty=function(e,n,i){this.setAttribute(e,n);var i="undefined"!=typeof i?i:"";if(""!=i){var s=new RegExp(t(e)+"\\s*:\\s*"+t(n)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(s,e+": "+n+" !"+i+";")}},CSSStyleDeclaration.prototype.removeProperty=function(e){return this.removeAttribute(e)},CSSStyleDeclaration.prototype.getPropertyPriority=function(e){var n=new RegExp(t(e)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi");return n.test(this.cssText)?"important":""}),e.fn.cssExtended=function(e,t,n){var i=this.get(0);if("undefined"==typeof i)return this;var s=this.get(0).style;return"undefined"!=typeof e?"undefined"!=typeof t?(n="undefined"!=typeof n?n:"",s.setProperty(e,t,n),this):s.getPropertyValue(e):s}}}function n(e){var t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return e.replace(t,"<a href='$1' target='_blank'>$1</a>")}function i(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}var s,a,r;!function(e){function t(e,t){return w.call(e,t)}function n(e,t){var n,i,s,a,r,o,l,p,u,c,d,h=t&&t.split("/"),f=y.map,m=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),r=e.length-1,y.nodeIdCompat&&k.test(e[r])&&(e[r]=e[r].replace(k,"")),e=h.slice(0,h.length-1).concat(e),u=0;u<e.length;u+=1)if(d=e[u],"."===d)e.splice(u,1),u-=1;else if(".."===d){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||m)&&f){for(n=e.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(c=h.length;c>0;c-=1)if(s=f[h.slice(0,c).join("/")],s&&(s=s[i])){a=s,o=u;break}if(a)break;!l&&m&&m[i]&&(l=m[i],p=u)}!a&&l&&(a=l,o=p),a&&(n.splice(0,o,a),e=n.join("/"))}return e}function i(t,n){return function(){var i=b.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),h.apply(e,i.concat([t,n]))}}function o(e){return function(t){return n(t,e)}}function l(e){return function(t){g[e]=t}}function p(n){if(t(v,n)){var i=v[n];delete v[n],_[n]=!0,d.apply(e,i)}if(!t(g,n)&&!t(_,n))throw new Error("No "+n);return g[n]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return y&&y.config&&y.config[e]||{}}}var d,h,f,m,g={},v={},y={},_={},w=Object.prototype.hasOwnProperty,b=[].slice,k=/\.js$/;f=function(e,t){var i,s=u(e),a=s[0];return e=s[1],a&&(a=n(a,t),i=p(a)),a?e=i&&i.normalize?i.normalize(e,o(t)):n(e,t):(e=n(e,t),s=u(e),a=s[0],e=s[1],a&&(i=p(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:i}},m={require:function(e){return i(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:c(e)}}},d=function(n,s,a,r){var o,u,c,d,h,y,w=[],b=typeof a;if(r=r||n,"undefined"===b||"function"===b){for(s=!s.length&&a.length?["require","exports","module"]:s,h=0;h<s.length;h+=1)if(d=f(s[h],r),u=d.f,"require"===u)w[h]=m.require(n);else if("exports"===u)w[h]=m.exports(n),y=!0;else if("module"===u)o=w[h]=m.module(n);else if(t(g,u)||t(v,u)||t(_,u))w[h]=p(u);else{if(!d.p)throw new Error(n+" missing "+u);d.p.load(d.n,i(r,!0),l(u),{}),w[h]=g[u]}c=a?a.apply(g[n],w):void 0,n&&(o&&o.exports!==e&&o.exports!==g[n]?g[n]=o.exports:c===e&&y||(g[n]=c))}else n&&(g[n]=a)},s=a=h=function(t,n,i,s,a){if("string"==typeof t)return m[t]?m[t](n):p(f(t,n).f);if(!t.splice){if(y=t,y.deps&&h(y.deps,y.callback),!n)return;n.splice?(t=n,n=i,i=null):t=e}return n=n||function(){},"function"==typeof i&&(i=s,s=a),s?d(e,t,n,i):setTimeout(function(){d(e,t,n,i)},4),h},h.config=function(e){return h(e)},s._defined=g,r=function(e,n,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(i=n,n=[]),t(g,e)||t(v,e)||(v[e]=[e,n,i])},r.amd={jQuery:!0}}(),r("vendor/almond",function(){}),function(e,t){"undefined"!=typeof exports?t(e,exports,a("underscore")):"function"==typeof r&&r.amd?r("backbone",["underscore","jquery","exports"],function(n,i,s){e.Backbone=t(e,s,n,i)}):e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){{var s=e.Backbone,a=[],r=(a.push,a.slice);a.splice}t.VERSION="1.1.0",t.$=i,t.noConflict=function(){return e.Backbone=s,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=t.Events={on:function(e,t,n){if(!p(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!p(this,"once",e,[t,i])||!t)return this;var s=this,a=n.once(function(){s.off(e,a),t.apply(this,arguments)});return a._callback=t,this.on(e,a,i)},off:function(e,t,i){var s,a,r,o,l,u,c,d;if(!this._events||!p(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(o=e?[e]:n.keys(this._events),l=0,u=o.length;u>l;l++)if(e=o[l],r=this._events[e]){if(this._events[e]=s=[],t||i)for(c=0,d=r.length;d>c;c++)a=r[c],(t&&t!==a.callback&&t!==a.callback._callback||i&&i!==a.context)&&s.push(a);s.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!p(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&u(n,t),i&&u(i,arguments),this},stopListening:function(e,t,i){var s=this._listeningTo;if(!s)return this;var a=!t&&!i;i||"object"!=typeof t||(i=this),e&&((s={})[e._listenId]=e);for(var r in s)e=s[r],e.off(t,i,this),(a||n.isEmpty(e._events))&&delete this._listeningTo[r];return this}},l=/\s+/,p=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)e[t].apply(e,[s,n[s]].concat(i));return!1}if(l.test(n)){for(var a=n.split(l),r=0,o=a.length;o>r;r++)e[t].apply(e,[a[r]].concat(i));return!1}return!0},u=function(e,t){var n,i=-1,s=e.length,a=t[0],r=t[1],o=t[2];switch(t.length){case 0:for(;++i<s;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a,r);return;case 3:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a,r,o);return;default:for(;++i<s;)(n=e[i]).callback.apply(n.ctx,t)}},c={listenTo:"on",listenToOnce:"once"};n.each(c,function(e,t){o[t]=function(t,i,s){var a=this._listeningTo||(this._listeningTo={}),r=t._listenId||(t._listenId=n.uniqueId("l"));return a[r]=t,s||"object"!=typeof i||(s=this),t[e](i,s,this),this}}),o.bind=o.on,o.unbind=o.off,n.extend(t,o);var d=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var s,a,r,o,l,p,u,c;if(null==e)return this;if("object"==typeof e?(a=e,i=t):(a={})[e]=t,i||(i={}),!this._validate(a,i))return!1;r=i.unset,l=i.silent,o=[],p=this._changing,this._changing=!0,p||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,u=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]);for(s in a)t=a[s],n.isEqual(c[s],t)||o.push(s),n.isEqual(u[s],t)?delete this.changed[s]:this.changed[s]=t,r?delete c[s]:c[s]=t;if(!l){o.length&&(this._pending=!0);for(var d=0,h=o.length;h>d;d++)this.trigger("change:"+o[d],this,c[o[d]],i)}if(p)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var a in e)n.isEqual(s[a],t=e[a])||((i||(i={}))[a]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},H(this,e),this.sync("read",this,e)},save:function(e,t,i){var s,a,r,o=this.attributes;if(null==e||"object"==typeof e?(s=e,i=t):(s={})[e]=t,i=n.extend({validate:!0},i),s&&!i.wait){if(!this.set(s,i))return!1}else if(!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=n.extend({},o,s)),void 0===i.parse&&(i.parse=!0);var l=this,p=i.success;return i.success=function(e){l.attributes=o;var t=l.parse(e,i);return i.wait&&(t=n.extend(s||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(p&&p(l,e,i),void l.trigger("sync",l,e,i))},H(this,i),a=this.isNew()?"create":i.patch?"patch":"update","patch"===a&&(i.attrs=s),r=this.sync(a,this,i),s&&i.wait&&(this.attributes=o),r},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,s=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&s(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;H(this,e);var a=this.sync("delete",this,e);return e.wait||s(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var h=["keys","values","pairs","invert","pick","omit"];n.each(h,function(e){d.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(f.prototype,o,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,g))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var s,a,r,o;for(s=0,a=e.length;a>s;s++)o=e[s]=this.get(e[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,t.silent||(t.index=r,o.trigger("remove",o,this,t)),this._removeReference(o));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var s,a,r,o,l,p,u,c=t.at,h=this.model,f=this.comparator&&null==c&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],y=[],_={},w=t.add,b=t.merge,k=t.remove,C=!f&&w&&k?[]:!1;for(s=0,a=e.length;a>s;s++){if(l=e[s],r=l instanceof d?o=l:l[h.prototype.idAttribute],p=this.get(r))k&&(_[p.cid]=!0),b&&(l=l===o?o.attributes:l,t.parse&&(l=p.parse(l,t)),p.set(l,t),f&&!u&&p.hasChanged(g)&&(u=!0)),e[s]=p;else if(w){if(o=e[s]=this._prepareModel(l,t),!o)continue;v.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)}C&&C.push(p||o)}if(k){for(s=0,a=this.length;a>s;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,t)}if(v.length||C&&C.length)if(f&&(u=!0),this.length+=v.length,null!=c)for(s=0,a=v.length;a>s;s++)this.models.splice(c+s,0,v[s]);else{C&&(this.models.length=0);var P=C||v;for(s=0,a=P.length;a>s;s++)this.models.push(P[s])}if(u&&this.sort({silent:!0}),!t.silent){for(s=0,a=v.length;a>s;s++)(o=v[s]).trigger("add",o,this,t);(u||C&&C.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,s=this.models.length;s>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return r.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var s=e.reset?"reset":"set";i[s](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},H(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,s=t.success;return t.success=function(e,t,n){n.wait&&i.add(e,n),s&&s(e,t,n)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];n.each(v,function(e){f.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=["groupBy","countBy","sortBy"];n.each(y,function(e){f.prototype[e]=function(t,i){var s=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,s,i)}});var _=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,o,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var s=t.match(w),a=s[1],r=s[2];i=n.bind(i,this),a+=".delegateEvents"+this.cid,""===r?this.$el.on(a,i):this.$el.on(a,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,s){var a=C[e];n.defaults(s||(s={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:a,dataType:"json"};if(s.url||(r.url=n.result(i,"url")||L()),null!=s.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){r.type="POST",s.emulateJSON&&(r.data._method=a);var o=s.beforeSend;s.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",a),o?o.apply(this,arguments):void 0}}"GET"===r.type||s.emulateJSON||(r.processData=!1),"PATCH"===r.type&&k&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=t.ajax(n.extend(r,s));return i.trigger("request",i,l,s),l};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};
t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var P=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,x=/(\(\?)?:\w+/g,T=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(P.prototype,o,{initialize:function(){},route:function(e,i,s){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var a=this;return t.history.route(e,function(n){var r=a._extractParameters(e,n);s&&s.apply(a,r),a.trigger.apply(a,["route:"+i].concat(r)),a.trigger("route",i,r),t.history.trigger("route",a,i,r)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(M,"(?:$1)?").replace(x,function(e,t){return t?e:"([^/]+)"}).replace(T,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e){return e?decodeURIComponent(e):null})}});var E=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,S=/msie [\w.]+/,I=/\/$/,R=/[?#].*$/;E.started=!1,n.extend(E.prototype,o,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(I,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(j,"")},start:function(e){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,a=S.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);this.root=("/"+this.root+"/").replace(A,"/"),a&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,o=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!o)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&o&&r.hash&&(this.fragment=this.getHash().replace(j,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!E.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(R,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new E;var $=function(e,t){var i,s=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,t);var a=function(){this.constructor=i};return a.prototype=s.prototype,i.prototype=new a,e&&n.extend(i.prototype,e),i.__super__=s.prototype,i};d.extend=f.extend=P.extend=_.extend=E.extend=$;var L=function(){throw new Error('A "url" property or function must be specified')},H=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),function(e,t){if("object"==typeof exports){var n=a("underscore"),i=a("backbone");module.exports=t(n,i)}else"function"==typeof r&&r.amd&&r("backbone.wreqr",["underscore","backbone"],t)}(this,function(e,t){"use strict";return t.Wreqr=function(e,t,n){var i={};return i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},setHandler:function(e,t,n){var i={callback:t,context:n};this._wreqrHandlers[e]=i,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw new Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,n),i.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},n.isFunction(this.initialize)&&this.initialize(e)};return n.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),i.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,i){var s=this.storage.getCommands(e);n.each(s.instances,function(e){t.apply(i,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,i=e.storageType||this.storageType;t=n.isFunction(i)?new i:i,this.storage=t}})}(i),i.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(i),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,n),i}(t,t.Marionette,e),t.Wreqr}),function(e,t){if("object"==typeof exports){var n=a("underscore"),i=a("backbone");module.exports=t(n,i)}else"function"==typeof r&&r.amd&&r("backbone.babysitter",["underscore","backbone"],t)}(this,function(e,t){"option strict";return t.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(t,e),t.ChildViewContainer}),function(e,t){if("object"==typeof exports){var n=a("underscore"),i=a("backbone"),s=a("backbone.wreqr"),o=a("backbone.babysitter");module.exports=t(n,i,s,o)}else"function"==typeof r&&r.amd&&r("marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],t)}(this,function(e,t){!function(e,t,n){"use strict";function i(e){return r.call(e)}function s(e,t){var n=new Error(e);throw n.name=t||"Error",n}var a={};t.Marionette=a,a.$=t.$;var r=Array.prototype.slice;return a.extend=t.Model.extend,a.getOption=function(e,t){if(e&&t){var n;return n=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},a.normalizeMethods=function(e){var t,i={};return n.each(e,function(e,s){t=e,n.isFunction(t)||(t=this[t]),t&&(i[s]=t)},this),i},a.triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi,i=function(i){var s="on"+i.replace(t,e),a=this[s];return n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n.isFunction(a)?a.apply(this,n.tail(arguments)):void 0};return i}(),a.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,s(e)}function i(e){e._isRendered=!0,s(e)}function s(e){e._isShown&&e._isRendered&&a(e)&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function a(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){i(e)})}}(document.documentElement),function(e){function t(e,t,i,a){var r=a.split(/\s+/);n.each(r,function(n){var a=e[n];a||s("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,i,a,e)})}function i(e,t,n,i){e.listenTo(t,n,i,e)}function a(e,t,i,s){var a=s.split(/\s+/);n.each(a,function(n){var s=e[n];e.stopListening(t,i,s,e)})}function r(e,t,n,i){e.stopListening(t,n,i,e)}function o(e,t,i,s,a){t&&i&&(n.isFunction(i)&&(i=i.call(e)),n.each(i,function(i,r){n.isFunction(i)?s(e,t,r,i):a(e,t,r,i)}))}e.bindEntityEvents=function(e,n,s){o(e,n,s,i,t)},e.unbindEntityEvents=function(e,t,n){o(e,t,n,r,a)}}(a),a.Callbacks=function(){this._deferred=a.$.Deferred(),this._callbacks=[]},n.extend(a.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(n,i){t&&(n=t),e.call(n,i)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=a.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),a.Controller=function(e){this.triggerMethod=a.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},a.Controller.extend=a.extend,n.extend(a.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),a.Region=function(e){if(this.options=e||{},this.el=a.getOption(this,"el"),!this.el){var t=new Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var n=Array.prototype.slice.apply(arguments);this.initialize.apply(this,n)}},n.extend(a.Region,{buildRegion:function(e,t){var i="string"==typeof e,s="string"==typeof e.selector,a="undefined"==typeof e.regionType,r="function"==typeof e;if(!r&&!i&&!s)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var o,l;i&&(o=e),e.selector&&(o=e.selector,delete e.selector),r&&(l=e),!r&&a&&(l=t),e.regionType&&(l=e.regionType,delete e.regionType),(i||r)&&(e={}),e.el=o;var p=new l(e);return e.parentEl&&(p.getEl=function(t){var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(t)}),p}}),n.extend(a.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,a.triggerMethod.call(this,"show",e),a.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return a.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),a.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),a.Region.extend=a.extend,a.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var i={};return n.each(e,function(e,s){"string"==typeof e&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var a=this.addRegion(s,e);i[s]=a},this),i},addRegion:function(t,i){var s,a=n.isObject(i),r=n.isString(i),o=!!i.selector;return s=r||a&&o?e.Region.buildRegion(i,e.Region):n.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,s),this.triggerMethod("region:add",t,s),s},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(i,function(e){t.prototype[e]=function(){var t=n.values(this._regions),i=[t].concat(n.toArray(arguments));return n[e].apply(n,i)}}),t}(a),a.TemplateCache=function(e){this.templateId=e},n.extend(a.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new a.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=i(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(a.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=a.$(e).html();return t&&0!==t.length||s("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return n.template(e)}}),a.Renderer={render:function(e,t){if(!e){var n=new Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}var i;return(i="function"==typeof e?e:a.TemplateCache.get(e))(t)}},a.View=t.View.extend({constructor:function(e){n.bindAll(this,"render");var i=Array.prototype.slice.apply(arguments);this.options=n.extend({},n.result(this,"options"),n.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(n.result(this,"events")),t.View.prototype.constructor.apply(this,i),a.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:a.triggerMethod,normalizeMethods:a.normalizeMethods,getTemplate:function(){return a.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=a.getOption(this,"templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},normalizeUIKeys:function(e){return"undefined"!=typeof e?(n.each(n.keys(e),function(t){var n=t.split("@ui.");2===n.length&&(e[n[0]+this.ui[n[1]]]=e[t],delete e[t])},this),e):void 0},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(n.result(this,"triggers"));return n.each(t,function(t,i){var s=n.isObject(t),a=s?t.event:t;e[i]=function(e){if(e){var n=e.preventDefault,i=e.stopPropagation,r=s?t.preventDefault:n,o=s?t.stopPropagation:i;r&&n&&n.apply(e),o&&i&&i.apply(e)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(a,l)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),a.bindEntityEvents(this,this.model,a.getOption(this,"modelEvents")),a.bindEntityEvents(this,this.collection,a.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var i={},s=this.configureTriggers();n.extend(i,e,s),t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),a.unbindEntityEvents(this,this.model,a.getOption(this,"modelEvents")),a.unbindEntityEvents(this,this.collection,a.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=this.triggerMethod("before:close");e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),a.ItemView=a.View.extend({constructor:function(){a.View.prototype.constructor.apply(this,i(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=a.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),a.View.prototype.close.apply(this,i(arguments)),this.triggerMethod("item:closed"))}}),a.CollectionView=a.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),a.View.prototype.constructor.apply(this,i(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(n.each(this._bufferedChildren,function(e){a.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),n=this.collection.indexOf(e);this.addItemView(e,t,n)},onShowCalled:function(){this.children.each(function(e){a.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return a.getOption(this,"emptyView")},getItemView:function(){var e=a.getOption(this,"itemView");return e||s("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,i){var s=a.getOption(this,"itemViewOptions");n.isFunction(s)&&(s=s.call(this,e,i));var r=this.buildItemView(e,t,s);return this.addChildViewEventForwarding(r),this.triggerMethod("before:item:added",r),this.children.add(r),this.renderItemView(r,i),this._isShown&&!this.isBuffering&&a.triggerMethod.call(r,"show"),this.triggerMethod("after:item:added",r),r},addChildViewEventForwarding:function(e){var t=a.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var s=i(arguments),r=s[0],o=this.normalizeMethods(this.getItemEvents());s[0]=t+":"+r,s.splice(1,0,e),"undefined"!=typeof o&&n.isFunction(o[r])&&o[r].apply(this,s),a.triggerMethod.apply(this,s)},this)},getItemEvents:function(){return n.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,i){var s=n.extend({model:e},i);return new t(s)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),a.View.prototype.close.apply(this,i(arguments)))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),a.CompositeView=a.CollectionView.extend({constructor:function(){a.CollectionView.prototype.constructor.apply(this,i(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var e=a.getOption(this,"itemView")||this.constructor;return e||s("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),a.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return a.Renderer.render(t,e)},appendBuffer:function(e,t){var n=this.getItemViewContainer(e);n.append(t)},appendHtml:function(e,t){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{var n=this.getItemViewContainer(e);n.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,i=a.getOption(e,"itemViewContainer");if(i){var r=n.isFunction(i)?i.call(this):i;t=e.$(r),t.length<=0&&s("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),a.Layout=a.ItemView.extend({regionType:a.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),a.ItemView.prototype.constructor.call(this,e)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=a.ItemView.prototype.render.apply(this,e);return t},close:function(){if(!this.isClosed){this.regionManager.close();var e=Array.prototype.slice.apply(arguments);a.ItemView.prototype.close.apply(this,e)}},addRegion:function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,n={regionType:a.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new a.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),a.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,i(arguments)),this.options=e||{};var n=a.getOption(this,"appRoutes"),s=this._getController();this.processAppRoutes(s,n)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},processAppRoutes:function(e,t){if(t){var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)}},_getController:function(){return a.getOption(this,"controller")},_addAppRoute:function(e,t,i){var s=e[i];if(!s)throw new Error("Method '"+i+"' was not found on the controller");this.route(t,i,n.bind(s,e))}}),a.Application=function(e){this._initRegionManager(),this._initCallbacks=new a.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=a.triggerMethod},n.extend(a.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var n=a.Module;t&&(n=t.moduleClass||n);var s=i(arguments);return s.unshift(this),n.create.apply(n,s)},_initRegionManager:function(){this._regionManager=new a.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),a.Application.extend=a.extend,a.Module=function(e,t,i){this.moduleName=e,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=a.triggerMethod,n.isFunction(this.initialize)&&this.initialize(this.options,e,t)},a.Module.extend=a.extend,n.extend(a.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,a.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),a.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var s=n.flatten([this,this.app,t,a,a.$,n,i]);e.apply(this,s)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new a.Callbacks,this._finalizerCallbacks=new a.Callbacks}}),n.extend(a.Module,{create:function(e,t,s){var a=e,r=i(arguments);r.splice(0,3),t=t.split(".");var o=t.length,l=[];return l[o-1]=s,n.each(t,function(t,n){var i=a;a=this._getModule(i,t,e,s),this._addModuleDefinition(i,a,l[n],r)},this),a},_getModule:function(e,t,i,s){var r=a.Module,o=n.extend({},s);s&&(r=s.moduleClass||r);var l=e[t];return l||(l=new r(t,i,o),e[t]=l,e.submodules[t]=l),l},_addModuleDefinition:function(e,t,i,s){var a,r;n.isFunction(i)?(a=i,r=!0):n.isObject(i)?(a=i.define,r="undefined"!=typeof i.startWithParent?i.startWithParent:!0):r=!0,a&&t.addDefinition(a,s),t.startWithParent=t.startWithParent&&r,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),a}(this,t,e);return t.Marionette}),function(e,t){function n(n,i){function s(e){return pt.preferFlash&&st&&!pt.ignoreFlash&&pt.flash[e]!==t&&pt.flash[e]}function a(e){return function(t){var n=this._s;return n&&n._a?e.call(this,t):null}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=i||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20131201",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;
var r,o,l,p,u,c,d,h,f,m,g,v,y,_,w,b,k,C,P,M,x,T,O,E,j,A,S,I,R,$,L,H,D,B,F,q,V,z,N,U,W,X,Q,Y,J,K,G,Z,et,tt,nt,it,st,at,rt,ot,lt,pt=this,ut=null,ct=null,dt=navigator.userAgent,ht=e.location.href.toString(),ft=document,mt=[],gt=!1,vt=!1,yt=!1,_t=!1,wt=!1,bt=null,kt=null,Ct=!1,Pt=!1,Mt=0,xt=null,Tt=[],Ot=null,Et=Array.prototype.slice,jt=!1,At=0,St=dt.match(/(ipad|iphone|ipod)/i),It=dt.match(/android/i),Rt=dt.match(/msie/i),$t=dt.match(/webkit/i),Lt=dt.match(/safari/i)&&!dt.match(/chrome/i),Ht=dt.match(/opera/i),Dt=dt.match(/(mobile|pre\/|xoom)/i)||St||It,Bt=!ht.match(/usehtml5audio/i)&&!ht.match(/sm2\-ignorebadua/i)&&Lt&&!dt.match(/silk/i)&&dt.match(/OS X 10_6_([3-7])/i),Ft=ft.hasFocus!==t?ft.hasFocus():null,qt=Lt&&(ft.hasFocus===t||!ft.hasFocus()),Vt=!qt,zt=/(mp3|mp4|mpa|m4a|m4b)/i,Nt=ft.location?ft.location.protocol.match(/http/i):null,Ut=Nt?"":"http://",Wt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,Xt="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),Qt=RegExp("\\.("+Xt.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Nt;var Yt;try{Yt=Audio!==t&&(Ht&&opera!==t&&10>opera.version()?new Audio(null):new Audio).canPlayType!==t}catch(Jt){Yt=!1}this.hasHTML5=Yt,this.setup=function(e){var n=!pt.url;return e!==t&&yt&&Ot&&pt.ok(),f(e),e&&(n&&E&&e.url!==t&&pt.beginDelayedInit(),!E&&e.url!==t&&"complete"===ft.readyState&&setTimeout(T,1)),pt},this.supported=this.ok=function(){return Ot?yt&&!_t:pt.useHTML5Audio&&pt.hasHTML5},this.getMovie=function(t){return o(t)||ft[t]||e[t]},this.createSound=function(e,n){function i(){return s=q(s),pt.sounds[s.id]=new r(s),pt.soundIDs.push(s.id),pt.sounds[s.id]}var s,a=null;if(!yt||!pt.ok())return!1;if(n!==t&&(e={id:e,url:n}),s=h(e),s.url=X(s.url),void 0===s.id&&(s.id=pt.setupOptions.idPrefix+At++),z(s.id,!0))return pt.sounds[s.id];if(J(s))a=i(),a._setup_html5(s);else{if(pt.html5Only||pt.html5.usingFlash&&s.url&&s.url.match(/data\:/i))return i();c>8&&null===s.isMovieStar&&(s.isMovieStar=!(!s.serverURL&&!(s.type&&s.type.match(Wt)||s.url&&s.url.match(Qt)))),s=V(s,void 0),a=i(),8===c?ct._createSound(s.id,s.loops||1,s.usePolicyFile):(ct._createSound(s.id,s.url,s.usePeakData,s.useWaveformData,s.useEQData,s.isMovieStar,s.isMovieStar?s.bufferTime:!1,s.loops||1,s.serverURL,s.duration||null,s.autoPlay,!0,s.autoLoad,s.usePolicyFile),s.serverURL||(a.connected=!0,s.onconnect&&s.onconnect.apply(a))),!s.serverURL&&(s.autoLoad||s.autoPlay)&&a.load(s)}return!s.serverURL&&s.autoPlay&&a.play(),a},this.destroySound=function(e,t){if(!z(e))return!1;var n,i=pt.sounds[e];for(i._iO={},i.stop(),i.unload(),n=0;n<pt.soundIDs.length;n++)if(pt.soundIDs[n]===e){pt.soundIDs.splice(n,1);break}return t||i.destruct(!0),delete pt.sounds[e],!0},this.load=function(e,t){return z(e)?pt.sounds[e].load(t):!1},this.unload=function(e){return z(e)?pt.sounds[e].unload():!1},this.onposition=this.onPosition=function(e,t,n,i){return z(e)?pt.sounds[e].onposition(t,n,i):!1},this.clearOnPosition=function(e,t,n){return z(e)?pt.sounds[e].clearOnPosition(t,n):!1},this.start=this.play=function(e,t){var n=null,i=t&&!(t instanceof Object);if(!yt||!pt.ok())return!1;if(z(e,i))i&&(t={url:t});else{if(!i)return!1;i&&(t={url:t}),t&&t.url&&(t.id=e,n=pt.createSound(t).play())}return null===n&&(n=pt.sounds[e].play(t)),n},this.setPosition=function(e,t){return z(e)?pt.sounds[e].setPosition(t):!1},this.stop=function(e){return z(e)?pt.sounds[e].stop():!1},this.stopAll=function(){for(var e in pt.sounds)pt.sounds.hasOwnProperty(e)&&pt.sounds[e].stop()},this.pause=function(e){return z(e)?pt.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=pt.soundIDs.length-1;e>=0;e--)pt.sounds[pt.soundIDs[e]].pause()},this.resume=function(e){return z(e)?pt.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=pt.soundIDs.length-1;e>=0;e--)pt.sounds[pt.soundIDs[e]].resume()},this.togglePause=function(e){return z(e)?pt.sounds[e].togglePause():!1},this.setPan=function(e,t){return z(e)?pt.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return z(e)?pt.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;if(e instanceof String&&(e=null),e)return z(e)?pt.sounds[e].mute():!1;for(t=pt.soundIDs.length-1;t>=0;t--)pt.sounds[pt.soundIDs[t]].mute();return pt.muted=!0},this.muteAll=function(){pt.mute()},this.unmute=function(e){if(e instanceof String&&(e=null),e)return z(e)?pt.sounds[e].unmute():!1;for(e=pt.soundIDs.length-1;e>=0;e--)pt.sounds[pt.soundIDs[e]].unmute();return pt.muted=!1,!0},this.unmuteAll=function(){pt.unmute()},this.toggleMute=function(e){return z(e)?pt.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return ct&&8!==c&&(e=parseInt(ct._getMemoryUse(),10)),e},this.disable=function(n){var i;if(n===t&&(n=!1),_t)return!1;for(_t=!0,i=pt.soundIDs.length-1;i>=0;i--)$(pt.sounds[pt.soundIDs[i]]);return d(n),nt.remove(e,"load",y),!0},this.canPlayMIME=function(e){var t;return pt.hasHTML5&&(t=K({type:e})),!t&&Ot&&(t=e&&pt.ok()?!!(c>8&&e.match(Wt)||e.match(pt.mimePattern)):null),t},this.canPlayURL=function(e){var t;return pt.hasHTML5&&(t=K({url:e})),!t&&Ot&&(t=e&&pt.ok()?!!e.match(pt.filePattern):null),t},this.canPlayLink=function(e){return e.type!==t&&e.type&&pt.canPlayMIME(e.type)?!0:pt.canPlayURL(e.href)},this.getSoundById=function(e){return e?pt.sounds[e]:null},this.onready=function(t,n){if("function"!=typeof t)throw D("needFunction","onready");return n||(n=e),g("onready",t,n),v(),!0},this.ontimeout=function(t,n){if("function"!=typeof t)throw D("needFunction","ontimeout");return n||(n=e),g("ontimeout",t,n),v({type:"ontimeout"}),!0},this._wD=this._writeDebug=function(){return!0},this._debug=function(){},this.reboot=function(t,n){var i,s,a;for(i=pt.soundIDs.length-1;i>=0;i--)pt.sounds[pt.soundIDs[i]].destruct();if(ct)try{Rt&&(kt=ct.innerHTML),bt=ct.parentNode.removeChild(ct)}catch(r){}if(kt=bt=Ot=ct=null,pt.enabled=E=yt=Ct=Pt=gt=vt=_t=jt=pt.swfLoaded=!1,pt.soundIDs=[],pt.sounds={},At=0,t)mt=[];else for(i in mt)if(mt.hasOwnProperty(i))for(s=0,a=mt[i].length;a>s;s++)mt[i][s].fired=!1;return pt.html5={usingFlash:null},pt.flash={},pt.html5Only=!1,pt.ignoreFlash=!1,e.setTimeout(function(){x(),n||pt.beginDelayedInit()},20),pt},this.reset=function(){return pt.reboot(!0,!0)},this.getMoviePercent=function(){return ct&&"PercentLoaded"in ct?ct.PercentLoaded():null},this.beginDelayedInit=function(){wt=!0,T(),setTimeout(function(){return Pt?!1:(A(),M(),Pt=!0)},20),_()},this.destruct=function(){pt.disable(!0)},r=function(e){var n,i,s,a,r,o,l,p,u,d,f,m=this,g=!1,v=[],y=0,_=null;i=n=null,this.sID=this.id=e.id,this.url=e.url,this._iO=this.instanceOptions=this.options=h(e),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,f=this.url?!1:!0,this.id3={},this._debug=function(){},this.load=function(e){var n,i=null;if(e!==t?m._iO=h(e,m.options):(e=m.options,m._iO=e,_&&_!==m.url&&(m._iO.url=m.url,m.url=null)),m._iO.url||(m._iO.url=m.url),m._iO.url=X(m._iO.url),n=m.instanceOptions=m._iO,!n.url&&!m.url)return m;if(n.url===m.url&&0!==m.readyState&&2!==m.readyState)return 3===m.readyState&&n.onload&&lt(m,function(){n.onload.apply(m,[!!m.duration])}),m;if(m.loaded=!1,m.readyState=1,m.playState=0,m.id3={},J(n))i=m._setup_html5(n),i._called_load||(m._html5_canplay=!1,m.url!==n.url&&(m._a.src=n.url,m.setPosition(0)),m._a.autobuffer="auto",m._a.preload="auto",m._a._called_load=!0);else{if(pt.html5Only||m._iO.url&&m._iO.url.match(/data\:/i))return m;try{m.isHTML5=!1,m._iO=V(q(n)),n=m._iO,8===c?ct._load(m.id,n.url,n.stream,n.autoPlay,n.usePolicyFile):ct._load(m.id,n.url,!!n.stream,!!n.autoPlay,n.loops||1,!!n.autoLoad,n.usePolicyFile)}catch(s){S({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return m.url=n.url,m},this.unload=function(){return 0!==m.readyState&&(m.isHTML5?(o(),m._a&&(m._a.pause(),_=Z(m._a))):8===c?ct._unload(m.id,"about:blank"):ct._unload(m.id),s()),m},this.destruct=function(e){m.isHTML5?(o(),m._a&&(m._a.pause(),Z(m._a),jt||r(),m._a._s=null,m._a=null)):(m._iO.onfailure=null,ct._destroySound(m.id)),e||pt.destroySound(m.id,!0)},this.start=this.play=function(e,n){var i,s,a,r,o;if(s=!0,s=null,n=n===t?!0:n,e||(e={}),m.url&&(m._iO.url=m.url),m._iO=h(m._iO,m.options),m._iO=h(e,m._iO),m._iO.url=X(m._iO.url),m.instanceOptions=m._iO,!m.isHTML5&&m._iO.serverURL&&!m.connected)return m.getAutoPlay()||m.setAutoPlay(!0),m;if(J(m._iO)&&(m._setup_html5(m._iO),l()),1===m.playState&&!m.paused&&(i=m._iO.multiShot,i||(m.isHTML5&&m.setPosition(m._iO.position),s=m)),null!==s)return s;if(e.url&&e.url!==m.url&&(m.readyState||m.isHTML5||8!==c||!f?m.load(m._iO):f=!1),m.loaded||(0===m.readyState?(m.isHTML5||pt.html5Only?m.isHTML5?m.load(m._iO):s=m:(m._iO.autoPlay=!0,m.load(m._iO)),m.instanceOptions=m._iO):2===m.readyState&&(s=m)),null!==s)return s;if(!m.isHTML5&&9===c&&0<m.position&&m.position===m.duration&&(e.position=0),m.paused&&0<=m.position&&(!m._iO.serverURL||0<m.position))m.resume();else{if(m._iO=h(e,m._iO),null!==m._iO.from&&null!==m._iO.to&&0===m.instanceCount&&0===m.playState&&!m._iO.serverURL){if(i=function(){m._iO=h(e,m._iO),m.play(m._iO)},m.isHTML5&&!m._html5_canplay?(m.load({_oncanplay:i}),s=!1):m.isHTML5||m.loaded||m.readyState&&2===m.readyState||(m.load({onload:i}),s=!1),null!==s)return s;m._iO=d()}(!m.instanceCount||m._iO.multiShotEvents||m.isHTML5&&m._iO.multiShot&&!jt||!m.isHTML5&&c>8&&!m.getAutoPlay())&&m.instanceCount++,m._iO.onposition&&0===m.playState&&p(m),m.playState=1,m.paused=!1,m.position=m._iO.position===t||isNaN(m._iO.position)?0:m._iO.position,m.isHTML5||(m._iO=V(q(m._iO))),m._iO.onplay&&n&&(m._iO.onplay.apply(m),g=!0),m.setVolume(m._iO.volume,!0),m.setPan(m._iO.pan,!0),m.isHTML5?2>m.instanceCount?(l(),s=m._setup_html5(),m.setPosition(m._iO.position),s.play()):(a=new Audio(m._iO.url),r=function(){nt.remove(a,"ended",r),m._onfinish(m),Z(a),a=null},o=function(){nt.remove(a,"canplay",o);try{a.currentTime=m._iO.position/1e3}catch(e){}a.play()},nt.add(a,"ended",r),void 0!==m._iO.volume&&(a.volume=Math.max(0,Math.min(1,m._iO.volume/100))),m.muted&&(a.muted=!0),m._iO.position?nt.add(a,"canplay",o):a.play()):(s=ct._start(m.id,m._iO.loops||1,9===c?m.position:m.position/1e3,m._iO.multiShot||!1),9===c&&!s&&m._iO.onplayerror&&m._iO.onplayerror.apply(m))}return m},this.stop=function(e){var t=m._iO;return 1===m.playState&&(m._onbufferchange(0),m._resetOnPosition(0),m.paused=!1,m.isHTML5||(m.playState=0),u(),t.to&&m.clearOnPosition(t.to),m.isHTML5?m._a&&(e=m.position,m.setPosition(0),m.position=e,m._a.pause(),m.playState=0,m._onTimer(),o()):(ct._stop(m.id,e),t.serverURL&&m.unload()),m.instanceCount=0,m._iO={},t.onstop&&t.onstop.apply(m)),m},this.setAutoPlay=function(e){m._iO.autoPlay=e,m.isHTML5||(ct._setAutoPlay(m.id,e),e&&!m.instanceCount&&1===m.readyState&&m.instanceCount++)},this.getAutoPlay=function(){return m._iO.autoPlay},this.setPosition=function(e){e===t&&(e=0);var n=m.isHTML5?Math.max(e,0):Math.min(m.duration||m._iO.duration,Math.max(e,0));if(m.position=n,e=m.position/1e3,m._resetOnPosition(m.position),m._iO.position=n,m.isHTML5){if(m._a){if(m._html5_canplay){if(m._a.currentTime!==e)try{m._a.currentTime=e,(0===m.playState||m.paused)&&m._a.pause()}catch(i){}}else if(e)return m;m.paused&&m._onTimer(!0)}}else e=9===c?m.position:e,m.readyState&&2!==m.readyState&&ct._setPosition(m.id,e,m.paused||!m.playState,m._iO.multiShot);return m},this.pause=function(e){return m.paused||0===m.playState&&1!==m.readyState?m:(m.paused=!0,m.isHTML5?(m._setup_html5().pause(),o()):(e||e===t)&&ct._pause(m.id,m._iO.multiShot),m._iO.onpause&&m._iO.onpause.apply(m),m)},this.resume=function(){var e=m._iO;return m.paused?(m.paused=!1,m.playState=1,m.isHTML5?(m._setup_html5().play(),l()):(e.isMovieStar&&!e.serverURL&&m.setPosition(m.position),ct._pause(m.id,e.multiShot)),!g&&e.onplay?(e.onplay.apply(m),g=!0):e.onresume&&e.onresume.apply(m),m):m},this.togglePause=function(){return 0===m.playState?(m.play({position:9!==c||m.isHTML5?m.position/1e3:m.position}),m):(m.paused?m.resume():m.pause(),m)},this.setPan=function(e,n){return e===t&&(e=0),n===t&&(n=!1),m.isHTML5||ct._setPan(m.id,e),m._iO.pan=e,n||(m.pan=e,m.options.pan=e),m},this.setVolume=function(e,n){return e===t&&(e=100),n===t&&(n=!1),m.isHTML5?m._a&&(pt.muted&&!m.muted&&(m.muted=!0,m._a.muted=!0),m._a.volume=Math.max(0,Math.min(1,e/100))):ct._setVolume(m.id,pt.muted&&!m.muted||m.muted?0:e),m._iO.volume=e,n||(m.volume=e,m.options.volume=e),m},this.mute=function(){return m.muted=!0,m.isHTML5?m._a&&(m._a.muted=!0):ct._setVolume(m.id,0),m},this.unmute=function(){m.muted=!1;var e=m._iO.volume!==t;return m.isHTML5?m._a&&(m._a.muted=!1):ct._setVolume(m.id,e?m._iO.volume:m.options.volume),m},this.toggleMute=function(){return m.muted?m.unmute():m.mute()},this.onposition=this.onPosition=function(e,n,i){return v.push({position:parseInt(e,10),method:n,scope:i!==t?i:m,fired:!1}),m},this.clearOnPosition=function(e,t){var n;if(e=parseInt(e,10),isNaN(e))return!1;for(n=0;n<v.length;n++)e!==v[n].position||t&&t!==v[n].method||(v[n].fired&&y--,v.splice(n,1))},this._processOnPosition=function(){var e,t;if(e=v.length,!e||!m.playState||y>=e)return!1;for(e-=1;e>=0;e--)t=v[e],!t.fired&&m.position>=t.position&&(t.fired=!0,y++,t.method.apply(t.scope,[t.position]));return!0},this._resetOnPosition=function(e){var t,n;if(t=v.length,!t)return!1;for(t-=1;t>=0;t--)n=v[t],n.fired&&e<=n.position&&(n.fired=!1,y--);return!0},d=function(){var e,t,n=m._iO,i=n.from,s=n.to;return t=function(){m.clearOnPosition(s,t),m.stop()},e=function(){null===s||isNaN(s)||m.onPosition(s,t)},null!==i&&!isNaN(i)&&(n.position=i,n.multiShot=!1,e()),n},p=function(){var e,t=m._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&m.onPosition(parseInt(e,10),t[e])},u=function(){var e,t=m._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&m.clearOnPosition(parseInt(e,10))},l=function(){m.isHTML5&&N(m)},o=function(){m.isHTML5&&U(m)},s=function(e){e||(v=[],y=0),g=!1,m._hasTimer=null,m._a=null,m._html5_canplay=!1,m.bytesLoaded=null,m.bytesTotal=null,m.duration=m._iO&&m._iO.duration?m._iO.duration:null,m.durationEstimate=null,m.buffered=[],m.eqData=[],m.eqData.left=[],m.eqData.right=[],m.failures=0,m.isBuffering=!1,m.instanceOptions={},m.instanceCount=0,m.loaded=!1,m.metadata={},m.readyState=0,m.muted=!1,m.paused=!1,m.peakData={left:0,right:0},m.waveformData={left:[],right:[]},m.playState=0,m.position=null,m.id3={}},s(),this._onTimer=function(e){var t,s=!1,a={};return m._hasTimer||e?(m._a&&(e||(0<m.playState||1===m.readyState)&&!m.paused)&&(t=m._get_html5_duration(),t!==n&&(n=t,m.duration=t,s=!0),m.durationEstimate=m.duration,t=1e3*m._a.currentTime||0,t!==i&&(i=t,s=!0),(s||e)&&m._whileplaying(t,a,a,a,a)),s):void 0},this._get_html5_duration=function(){var e=m._iO;return(e=m._a&&m._a.duration?1e3*m._a.duration:e&&e.duration?e.duration:null)&&!isNaN(e)&&1/0!==e?e:null},this._apply_loop=function(e,t){e.loop=t>1?"loop":""},this._setup_html5=function(e){e=h(m._iO,e);var t,n=jt?ut:m._a,i=decodeURI(e.url);if(jt?i===decodeURI(it)&&(t=!0):i===decodeURI(_)&&(t=!0),n){if(n._s)if(jt)n._s&&n._s.playState&&!t&&n._s.stop();else if(!jt&&i===decodeURI(_))return m._apply_loop(n,e.loops),n;t||(_&&s(!1),n.src=e.url,it=_=m.url=e.url,n._called_load=!1)}else e.autoLoad||e.autoPlay?(m._a=new Audio(e.url),m._a.load()):m._a=Ht&&10>opera.version()?new Audio(null):new Audio,n=m._a,n._called_load=!1,jt&&(ut=n);return m.isHTML5=!0,m._a=n,n._s=m,a(),m._apply_loop(n,e.loops),e.autoLoad||e.autoPlay?m.load():(n.autobuffer=!1,n.preload="auto"),n},a=function(){if(m._a._added_events)return!1;var e;m._a._added_events=!0;for(e in ot)ot.hasOwnProperty(e)&&m._a&&m._a.addEventListener(e,ot[e],!1);return!0},r=function(){var e;m._a._added_events=!1;for(e in ot)ot.hasOwnProperty(e)&&m._a&&m._a.removeEventListener(e,ot[e],!1)},this._onload=function(e){var t=!!e||!m.isHTML5&&8===c&&m.duration;return m.loaded=t,m.readyState=t?3:2,m._onbufferchange(0),m._iO.onload&&lt(m,function(){m._iO.onload.apply(m,[t])}),!0},this._onbufferchange=function(e){return 0===m.playState||e&&m.isBuffering||!e&&!m.isBuffering?!1:(m.isBuffering=1===e,m._iO.onbufferchange&&m._iO.onbufferchange.apply(m),!0)},this._onsuspend=function(){return m._iO.onsuspend&&m._iO.onsuspend.apply(m),!0},this._onfailure=function(e,t,n){m.failures++,m._iO.onfailure&&1===m.failures&&m._iO.onfailure(m,e,t,n)},this._onfinish=function(){var e=m._iO.onfinish;m._onbufferchange(0),m._resetOnPosition(0),m.instanceCount&&(m.instanceCount--,m.instanceCount||(u(),m.playState=0,m.paused=!1,m.instanceCount=0,m.instanceOptions={},m._iO={},o(),m.isHTML5&&(m.position=0)),(!m.instanceCount||m._iO.multiShotEvents)&&e&&lt(m,function(){e.apply(m)}))},this._whileloading=function(e,t,n,i){var s=m._iO;m.bytesLoaded=e,m.bytesTotal=t,m.duration=Math.floor(n),m.bufferLength=i,m.durationEstimate=m.isHTML5||s.isMovieStar?m.duration:s.duration?m.duration>s.duration?m.duration:s.duration:parseInt(m.bytesTotal/m.bytesLoaded*m.duration,10),m.isHTML5||(m.buffered=[{start:0,end:m.duration}]),(3!==m.readyState||m.isHTML5)&&s.whileloading&&s.whileloading.apply(m)},this._whileplaying=function(e,n,i,s,a){var r=m._iO;return isNaN(e)||null===e?!1:(m.position=Math.max(0,e),m._processOnPosition(),!m.isHTML5&&c>8&&(r.usePeakData&&n!==t&&n&&(m.peakData={left:n.leftPeak,right:n.rightPeak}),r.useWaveformData&&i!==t&&i&&(m.waveformData={left:i.split(","),right:s.split(",")}),r.useEQData&&a!==t&&a&&a.leftEQ&&(e=a.leftEQ.split(","),m.eqData=e,m.eqData.left=e,a.rightEQ!==t&&a.rightEQ&&(m.eqData.right=a.rightEQ.split(",")))),1===m.playState&&(!m.isHTML5&&8===c&&!m.position&&m.isBuffering&&m._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(m)),!0)},this._oncaptiondata=function(e){m.captiondata=e,m._iO.oncaptiondata&&m._iO.oncaptiondata.apply(m,[e])},this._onmetadata=function(e,t){var n,i,s={};for(n=0,i=e.length;i>n;n++)s[e[n]]=t[n];m.metadata=s,m._iO.onmetadata&&m._iO.onmetadata.apply(m)},this._onid3=function(e,t){var n,i,s=[];for(n=0,i=e.length;i>n;n++)s[e[n]]=t[n];m.id3=h(m.id3,s),m._iO.onid3&&m._iO.onid3.apply(m)},this._onconnect=function(e){e=1===e,(m.connected=e)&&(m.failures=0,z(m.id)&&(m.getAutoPlay()?m.play(t,m.getAutoPlay()):m._iO.autoLoad&&m.load()),m._iO.onconnect&&m._iO.onconnect.apply(m,[e]))},this._ondataerror=function(){0<m.playState&&m._iO.ondataerror&&m._iO.ondataerror.apply(m)}},j=function(){return ft.body||ft.getElementsByTagName("div")[0]},o=function(e){return ft.getElementById(e)},h=function(e,n){var i,s,a=e||{};i=n===t?pt.defaultOptions:n;for(s in i)i.hasOwnProperty(s)&&a[s]===t&&(a[s]="object"!=typeof i[s]||null===i[s]?i[s]:h(a[s],i[s]));return a},lt=function(t,n){t.isHTML5||8!==c?n():e.setTimeout(n,0)},m={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},f=function(e,n){var i,s=!0,a=n!==t,r=pt.setupOptions;for(i in e)if(e.hasOwnProperty(i))if("object"!=typeof e[i]||null===e[i]||e[i]instanceof Array||e[i]instanceof RegExp)a&&m[n]!==t?pt[n][i]=e[i]:r[i]!==t?(pt.setupOptions[i]=e[i],pt[i]=e[i]):m[i]===t?s=!1:pt[i]instanceof Function?pt[i].apply(pt,e[i]instanceof Array?e[i]:[e[i]]):pt[i]=e[i];else{if(m[i]!==t)return f(e[i],i);s=!1}return s},nt=function(){function t(e){e=Et.call(e);var t=e.length;return i?(e[1]="on"+e[1],t>3&&e.pop()):3===t&&e.push(!1),e}function n(e,t){var n=e.shift(),a=[s[t]];i?n[a](e[0],e[1]):n[a].apply(n,e)}var i=e.attachEvent,s={add:i?"attachEvent":"addEventListener",remove:i?"detachEvent":"removeEventListener"};return{add:function(){n(t(arguments),"add")},remove:function(){n(t(arguments),"remove")}}}(),ot={abort:a(function(){}),canplay:a(function(){var e,n=this._s;if(n._html5_canplay)return!0;if(n._html5_canplay=!0,n._onbufferchange(0),e=n._iO.position===t||isNaN(n._iO.position)?null:n._iO.position/1e3,n.position&&this.currentTime!==e)try{this.currentTime=e}catch(i){}n._iO._oncanplay&&n._iO._oncanplay()}),canplaythrough:a(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),ended:a(function(){this._s._onfinish()}),error:a(function(){this._s._onload(!1)}),loadeddata:a(function(){var e=this._s;!e._loaded&&!Lt&&(e.duration=e._get_html5_duration())}),loadedmetadata:a(function(){}),loadstart:a(function(){this._s._onbufferchange(1)}),play:a(function(){this._s._onbufferchange(0)}),playing:a(function(){this._s._onbufferchange(0)}),progress:a(function(e){var t,n,i=this._s,s=0,s=e.target.buffered;t=e.loaded||0;var a=e.total||1;if(i.buffered=[],s&&s.length){for(t=0,n=s.length;n>t;t++)i.buffered.push({start:1e3*s.start(t),end:1e3*s.end(t)});s=1e3*(s.end(0)-s.start(0)),t=Math.min(1,s/(1e3*e.target.duration))}isNaN(t)||(i._onbufferchange(0),i._whileloading(t,a,i._get_html5_duration()),t&&a&&t===a&&ot.canplaythrough.call(this,e))}),ratechange:a(function(){}),suspend:a(function(e){var t=this._s;ot.progress.call(this,e),t._onsuspend()}),stalled:a(function(){}),timeupdate:a(function(){this._s._onTimer()}),waiting:a(function(){this._s._onbufferchange(1)})},J=function(e){return e&&(e.type||e.url||e.serverURL)?e.serverURL||e.type&&s(e.type)?!1:e.type?K({type:e.type}):K({url:e.url})||pt.html5Only||e.url.match(/data\:/i):!1},Z=function(e){var t;return e&&(t=Lt?"about:blank":pt.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":"about:blank",e.src=t,void 0!==e._called_unload&&(e._called_load=!1)),jt&&(it=null),t},K=function(e){if(!pt.useHTML5Audio||!pt.hasHTML5)return!1;var n=e.url||null;e=e.type||null;var i,a=pt.audioFormats;if(e&&pt.html5[e]!==t)return pt.html5[e]&&!s(e);if(!G){G=[];for(i in a)a.hasOwnProperty(i)&&(G.push(i),a[i].related&&(G=G.concat(a[i].related)));G=RegExp("\\.("+G.join("|")+")(\\?.*)?$","i")}return i=n?n.toLowerCase().match(G):null,i&&i.length?i=i[1]:e&&(n=e.indexOf(";"),i=(-1!==n?e.substr(0,n):e).substr(6)),i&&pt.html5[i]!==t?n=pt.html5[i]&&!s(i):(e="audio/"+i,n=pt.html5.canPlayType({type:e}),n=(pt.html5[i]=n)&&pt.html5[e]&&!s(e)),n},tt=function(){function e(e){var t,n=t=!1;if(!r||"function"!=typeof r.canPlayType)return t;if(e instanceof Array){for(a=0,t=e.length;t>a;a++)(pt.html5[e[a]]||r.canPlayType(e[a]).match(pt.html5Test))&&(n=!0,pt.html5[e[a]]=!0,pt.flash[e[a]]=!!e[a].match(zt));t=n}else e=r&&"function"==typeof r.canPlayType?r.canPlayType(e):!1,t=!(!e||!e.match(pt.html5Test));return t}if(!pt.useHTML5Audio||!pt.hasHTML5)return Ot=pt.html5.usingFlash=!0,!1;var n,i,s,a,r=Audio!==t?Ht&&10>opera.version()?new Audio(null):new Audio:null,o={};s=pt.audioFormats;for(n in s)if(s.hasOwnProperty(n)&&(i="audio/"+n,o[n]=e(s[n].type),o[i]=o[n],n.match(zt)?(pt.flash[n]=!0,pt.flash[i]=!0):(pt.flash[n]=!1,pt.flash[i]=!1),s[n]&&s[n].related))for(a=s[n].related.length-1;a>=0;a--)o["audio/"+s[n].related[a]]=o[n],pt.html5[s[n].related[a]]=o[n],pt.flash[s[n].related[a]]=o[n];return o.canPlayType=r?e:null,pt.html5=h(pt.html5,o),pt.html5.usingFlash=Y(),Ot=pt.html5.usingFlash,!0},P={},D=function(){},q=function(e){return 8===c&&1<e.loops&&e.stream&&(e.stream=!1),e},V=function(e){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(e.usePolicyFile=!0),e},l=function(){return!1},$=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=l)},L=function(e){e===t&&(e=!1),(_t||e)&&pt.disable(e)},H=function(e){var t=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+pt.movieURL,pt.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},k=function(){c=parseInt(pt.flashVersion,10),8!==c&&9!==c&&(pt.flashVersion=c=8);var e=pt.debugMode||pt.debugFlash?"_debug.swf":".swf";pt.useHTML5Audio&&!pt.html5Only&&pt.audioFormats.mp4.required&&9>c&&(pt.flashVersion=c=9),pt.version=pt.versionNumber+(pt.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(pt.defaultOptions=h(pt.defaultOptions,pt.flash9Options),pt.features.buffering=!0,pt.defaultOptions=h(pt.defaultOptions,pt.movieStarOptions),pt.filePatterns.flash9=RegExp("\\.(mp3|"+Xt.join("|")+")(\\?.*)?$","i"),pt.features.movieStar=!0):pt.features.movieStar=!1,pt.filePattern=pt.filePatterns[8!==c?"flash9":"flash8"],pt.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),pt.features.peakData=pt.features.waveformData=pt.features.eqData=c>8},I=function(e,t){return ct?void ct._setPolling(e,t):!1},R=function(){},z=this.getSoundById,F=function(){var e=[];return pt.debugMode&&e.push("sm2_debug"),pt.debugFlash&&e.push("flash_debug"),pt.useHighPerformance&&e.push("high_performance"),e.join(" ")},B=function(){D("fbHandler");var e=pt.getMoviePercent(),t={type:"FLASHBLOCK"};return pt.html5Only?!1:void(pt.ok()?pt.oMC&&(pt.oMC.className=[F(),"movieContainer","swf_loaded"+(pt.didFlashBlock?" swf_unblocked":"")].join(" ")):(Ot&&(pt.oMC.className=F()+" movieContainer "+(null===e?"swf_timedout":"swf_error")),pt.didFlashBlock=!0,v({type:"ontimeout",ignoreInit:!0,error:t}),S(t)))},g=function(e,n,i){mt[e]===t&&(mt[e]=[]),mt[e].push({method:n,scope:i||null,fired:!1})},v=function(e){if(e||(e={type:pt.ok()?"onready":"ontimeout"}),!yt&&e&&!e.ignoreInit||"ontimeout"===e.type&&(pt.ok()||_t&&!e.ignoreInit))return!1;var t,n={success:e&&e.ignoreInit?pt.ok():!_t},i=e&&e.type?mt[e.type]||[]:[],s=[],n=[n],a=Ot&&!pt.ok();for(e.error&&(n[0].error=e.error),e=0,t=i.length;t>e;e++)!0!==i[e].fired&&s.push(i[e]);if(s.length)for(e=0,t=s.length;t>e;e++)s[e].scope?s[e].method.apply(s[e].scope,n):s[e].method.apply(this,n),a||(s[e].fired=!0);return!0},y=function(){e.setTimeout(function(){pt.useFlashBlock&&B(),v(),"function"==typeof pt.onload&&pt.onload.apply(e),pt.waitForWindowLoad&&nt.add(e,"load",y)},1)},at=function(){if(st!==t)return st;var n,i=!1,s=navigator,a=s.plugins,r=e.ActiveXObject;if(a&&a.length)(s=s.mimeTypes)&&s["application/x-shockwave-flash"]&&s["application/x-shockwave-flash"].enabledPlugin&&s["application/x-shockwave-flash"].enabledPlugin.description&&(i=!0);else if(r!==t&&!dt.match(/MSAppHost/i)){try{n=new r("ShockwaveFlash.ShockwaveFlash")}catch(o){n=null}i=!!n}return st=i},Y=function(){var e,t,n=pt.audioFormats;if(St&&dt.match(/os (1|2|3_0|3_1)/i)?(pt.hasHTML5=!1,pt.html5Only=!0,pt.oMC&&(pt.oMC.style.display="none")):!pt.useHTML5Audio||pt.html5&&pt.html5.canPlayType||(pt.hasHTML5=!1),pt.useHTML5Audio&&pt.hasHTML5)for(t in Q=!0,n)n.hasOwnProperty(t)&&n[t].required&&(pt.html5.canPlayType(n[t].type)?pt.preferFlash&&(pt.flash[t]||pt.flash[n[t].type])&&(e=!0):(Q=!1,e=!0));return pt.ignoreFlash&&(e=!1,Q=!0),pt.html5Only=pt.hasHTML5&&pt.useHTML5Audio&&!e,!pt.html5Only},X=function(e){var t,n,i=0;if(e instanceof Array){for(t=0,n=e.length;n>t;t++)if(e[t]instanceof Object){if(pt.canPlayMIME(e[t].type)){i=t;break}}else if(pt.canPlayURL(e[t])){i=t;break}e[i].url&&(e[i]=e[i].url),e=e[i]}return e},N=function(e){e._hasTimer||(e._hasTimer=!0,!Dt&&pt.html5PollingInterval&&(null===xt&&0===Mt&&(xt=setInterval(W,pt.html5PollingInterval)),Mt++))},U=function(e){e._hasTimer&&(e._hasTimer=!1,!Dt&&pt.html5PollingInterval&&Mt--)},W=function(){var e;if(null!==xt&&!Mt)return clearInterval(xt),xt=null,!1;for(e=pt.soundIDs.length-1;e>=0;e--)pt.sounds[pt.soundIDs[e]].isHTML5&&pt.sounds[pt.soundIDs[e]]._hasTimer&&pt.sounds[pt.soundIDs[e]]._onTimer()},S=function(n){n=n!==t?n:{},"function"==typeof pt.onerror&&pt.onerror.apply(e,[{type:n.type!==t?n.type:null}]),n.fatal!==t&&n.fatal&&pt.disable()},rt=function(){if(!Bt||!at())return!1;var e,t,n=pt.audioFormats;for(t in n)if(n.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(pt.html5[t]=!1,n[t]&&n[t].related))for(e=n[t].related.length-1;e>=0;e--)pt.html5[n[t].related[e]]=!1},this._setSandboxType=function(){},this._externalInterfaceOK=function(){return pt.swfLoaded?!1:(pt.swfLoaded=!0,qt=!1,Bt&&rt(),void setTimeout(u,Rt?100:1))},A=function(e,n){function i(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(gt&&vt)return!1;if(pt.html5Only)return k(),pt.oMC=o(pt.movieID),u(),vt=gt=!0,!1;var s,a,r,l=n||pt.url,p=pt.altURL||l,c=j(),d=F(),h=null,h=ft.getElementsByTagName("html")[0],h=h&&h.dir&&h.dir.match(/rtl/i);if(e=e===t?pt.id:e,k(),pt.url=H(Nt?l:p),n=pt.url,pt.wmode=!pt.wmode&&pt.useHighPerformance?"transparent":pt.wmode,null!==pt.wmode&&(dt.match(/msie 8/i)||!Rt&&!pt.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Tt.push(P.spcWmode),pt.wmode=null),c={name:e,id:e,src:n,quality:"high",allowScriptAccess:pt.allowScriptAccess,bgcolor:pt.bgColor,pluginspage:Ut+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:pt.wmode,hasPriority:"true"},pt.debugFlash&&(c.FlashVars="debug=1"),pt.wmode||delete c.wmode,Rt)l=ft.createElement("div"),a=['<object id="'+e+'" data="'+n+'" type="'+c.type+'" title="'+c.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Ut+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',i("movie",n),i("AllowScriptAccess",pt.allowScriptAccess),i("quality",c.quality),pt.wmode?i("wmode",pt.wmode):"",i("bgcolor",pt.bgColor),i("hasPriority","true"),pt.debugFlash?i("FlashVars",c.FlashVars):"","</object>"].join("");else for(s in l=ft.createElement("embed"),c)c.hasOwnProperty(s)&&l.setAttribute(s,c[s]);if(R(),d=F(),c=j())if(pt.oMC=o(pt.movieID)||ft.createElement("div"),pt.oMC.id)r=pt.oMC.className,pt.oMC.className=(r?r+" ":"movieContainer")+(d?" "+d:""),pt.oMC.appendChild(l),Rt&&(s=pt.oMC.appendChild(ft.createElement("div")),s.className="sm2-object-box",s.innerHTML=a),vt=!0;else{if(pt.oMC.id=pt.movieID,pt.oMC.className="movieContainer "+d,s=d=null,pt.useFlashBlock||(pt.useHighPerformance?d={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(d={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},h&&(d.left=Math.abs(parseInt(d.left,10))+"px"))),$t&&(pt.oMC.style.zIndex=1e4),!pt.debugFlash)for(r in d)d.hasOwnProperty(r)&&(pt.oMC.style[r]=d[r]);try{Rt||pt.oMC.appendChild(l),c.appendChild(pt.oMC),Rt&&(s=pt.oMC.appendChild(ft.createElement("div")),s.className="sm2-object-box",s.innerHTML=a),vt=!0}catch(f){throw Error(D("domError")+" \n"+f.toString())}}return gt=!0},M=function(){return pt.html5Only?(A(),!1):ct||!pt.url?!1:(ct=pt.getMovie(pt.id),ct||(bt?(Rt?pt.oMC.innerHTML=kt:pt.oMC.appendChild(bt),bt=null,gt=!0):A(pt.id,pt.url),ct=pt.getMovie(pt.id)),"function"==typeof pt.oninitmovie&&setTimeout(pt.oninitmovie,1),!0)},_=function(){setTimeout(w,1e3)},b=function(){e.setTimeout(function(){pt.setup({preferFlash:!1}).reboot(),pt.didFlashBlock=!0,pt.beginDelayedInit()},1)},w=function(){var t,n=!1;return!pt.url||Ct?!1:(Ct=!0,nt.remove(e,"load",_),st&&qt&&!Ft?!1:(yt||(t=pt.getMoviePercent(),t>0&&100>t&&(n=!0)),void setTimeout(function(){return t=pt.getMoviePercent(),n?(Ct=!1,e.setTimeout(_,1),!1):void(!yt&&Vt&&(null===t?pt.useFlashBlock||0===pt.flashLoadTimeout?pt.useFlashBlock&&B():!pt.useFlashBlock&&Q?b():v({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}}):0!==pt.flashLoadTimeout&&(!pt.useFlashBlock&&Q?b():L(!0))))},pt.flashLoadTimeout)))},C=function(){return Ft||!qt?(nt.remove(e,"focus",C),!0):(Ft=Vt=!0,Ct=!1,_(),nt.remove(e,"focus",C),!0)},d=function(t){if(yt)return!1;if(pt.html5Only)return yt=!0,y(),!0;var n,i=!0;return pt.useFlashBlock&&pt.flashLoadTimeout&&!pt.getMoviePercent()||(yt=!0),n={type:!st&&Ot?"NO_FLASH":"INIT_TIMEOUT"},(_t||t)&&(pt.useFlashBlock&&pt.oMC&&(pt.oMC.className=F()+" "+(null===pt.getMoviePercent()?"swf_timedout":"swf_error")),v({type:"ontimeout",error:n,ignoreInit:!0}),S(n),i=!1),_t||(pt.waitForWindowLoad&&!wt?nt.add(e,"load",y):y()),i},p=function(){var e,n=pt.setupOptions;for(e in n)n.hasOwnProperty(e)&&(pt[e]===t?pt[e]=n[e]:pt[e]!==n[e]&&(pt.setupOptions[e]=pt[e]))},u=function(){if(yt)return!1;if(pt.html5Only)return yt||(nt.remove(e,"load",pt.beginDelayedInit),pt.enabled=!0,d()),!0;M();try{ct._externalInterfaceTest(!1),I(!0,pt.flashPollingInterval||(pt.useHighPerformance?10:50)),pt.debugMode||ct._disableDebug(),pt.enabled=!0,pt.html5Only||nt.add(e,"unload",l)
}catch(t){return S({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),L(!0),d(),!1}return d(),nt.remove(e,"load",pt.beginDelayedInit),!0},T=function(){return E?!1:(E=!0,p(),R(),!st&&pt.hasHTML5&&pt.setup({useHTML5Audio:!0,preferFlash:!1}),tt(),!st&&Ot&&(Tt.push(P.needFlash),pt.setup({flashLoadTimeout:1})),ft.removeEventListener&&ft.removeEventListener("DOMContentLoaded",T,!1),M(),!0)},et=function(){return"complete"===ft.readyState&&(T(),ft.detachEvent("onreadystatechange",et)),!0},O=function(){wt=!0,nt.remove(e,"load",O)},x=function(){Dt&&(pt.setupOptions.useHTML5Audio=!0,pt.setupOptions.preferFlash=!1,St||It&&!dt.match(/android\s2\.3/i))&&(St&&(pt.ignoreFlash=!0),jt=!0)},x(),at(),nt.add(e,"focus",C),nt.add(e,"load",_),nt.add(e,"load",O),ft.addEventListener?ft.addEventListener("DOMContentLoaded",T,!1):ft.attachEvent?ft.attachEvent("onreadystatechange",et):S({type:"NO_DOM2_EVENTS",fatal:!0})}var i=null;void 0!==e.SM2_DEFER&&SM2_DEFER||(i=new n),e.SoundManager=n,e.soundManager=i}(window),r("soundmanager2",function(e){return function(){var t;return t||e.soundManager}}(this)),r("text",["module"],function(e){"use strict";var t,n,i,s,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,p=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,c=u&&location.protocol&&location.protocol.replace(/\:/,""),d=u&&location.hostname,h=u&&(location.port||void 0),f={},m=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(p);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(i){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,i,s=!1,a=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==a&&(!r||a>1)?(t=e.substring(0,a),n=e.substring(a+1,e.length)):t=e,i=n||t,a=i.indexOf("!"),-1!==a&&(s="strip"===i.substring(a+1),i=i.substring(0,a),n?n=i:t=i),{moduleName:t,ext:n,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,s){var a,r,o,l=t.xdRegExp.exec(e);return l?(a=l[2],r=l[3],r=r.split(":"),o=r[1],r=r[0],!(a&&a!==n||r&&r.toLowerCase()!==i.toLowerCase()||(o||r)&&o!==s)):!0},finishLoad:function(e,n,i,s){i=n?t.strip(i):i,m.isBuild&&(f[e]=i),s(i)},load:function(e,n,i,s){if(s.isBuild&&!s.inlineText)return void i();m.isBuild=s.isBuild;var a=t.parseName(e),r=a.moduleName+(a.ext?"."+a.ext:""),o=n.toUrl(r),l=m.useXhr||t.useXhr;return 0===o.indexOf("empty:")?void i():void(!u||l(o,c,d,h)?t.get(o,function(n){t.finishLoad(e,a.strip,n,i)},function(e){i.error&&i.error(e)}):n([r],function(e){t.finishLoad(a.moduleName+"."+a.ext,a.strip,e,i)}))},write:function(e,n,i){if(f.hasOwnProperty(n)){var s=t.jsEscape(f[n]);i.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,i,s,a){var r=t.parseName(n),o=r.ext?"."+r.ext:"",l=r.moduleName+o,p=i.toUrl(r.moduleName+o)+".js";t.load(l,i,function(){var n=function(e){return s(p,e)};n.asModule=function(e,t){return s.asModule(e,p,t)},t.write(e,l,n,a)},a)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=a.nodeRequire("fs"),t.get=function(e,t,i){try{var s=n.readFileSync(e,"utf8");0===s.indexOf("﻿")&&(s=s.substring(1)),t(s)}catch(a){i(a)}}):"xhr"===m.env||!m.env&&t.createXhr()?t.get=function(e,n,i,s){var a,r=t.createXhr();if(r.open("GET",e,!0),s)for(a in s)s.hasOwnProperty(a)&&r.setRequestHeader(a.toLowerCase(),s[a]);m.onXhr&&m.onXhr(r,e),r.onreadystatechange=function(){var t,s;4===r.readyState&&(t=r.status,t>399&&600>t?(s=new Error(e+" HTTP status: "+t),s.xhr=r,i(s)):n(r.responseText),m.onXhrComplete&&m.onXhrComplete(r,e))},r.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,s="utf-8",a=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),s)),l="";try{for(n=new java.lang.StringBuffer,i=o.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=o.readLine());)n.append(r),n.append(i);l=String(n.toString())}finally{o.close()}t(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,a,o,l={};r&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(o,1,0,!1),a=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),a.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),l),a.close(),n.close(),t(l.value)}catch(p){throw new Error((o&&o.path||"")+": "+p)}}),t}),r("text!templates/spp-template.html",[],function(){return'<div class="spp-player-container"></div>\r\n<div class="spp-player-body">\r\n	<div class="spp-track-details-container"></div>\r\n	<div class="spp-playlist-container"></div>\r\n</div>\r\n<div style="clear: both;"></div>\r\n'}),r("text!templates/player-template.html",[],function(){return'<% if ( data.show_logo != undefined && data.show_logo != null ) { %>\r\n	<div class="spp-show-logo">\r\n		<img src="<%= data.show_logo %>" alt="<%= data.show_name %>" />\r\n	</div>\r\n<% } %>\r\n\r\n<div class="spp-track" data-track-id="<%= \'track_\' + data.cid %>">\r\n	<p class="spp-show-title"><%= data.show_name %><span class="spp-show-count"></span></p>\r\n	<h3 class="spp-track-title"><%= data.title %></h3>\r\n	<p class="spp-duration"></p>\r\n	\r\n	<div class="spp-progress">\r\n		<div class="spp-current-time"></div>\r\n		<div class="spp-position"></div>\r\n		<div class="spp-total-time"></div>\r\n	</div>\r\n\r\n	<div class="spp-loaded-container">\r\n		<div class="spp-loaded"></div>\r\n	</div>\r\n	\r\n	<div class="spp-controls">\r\n		<% if ( data.paid == true ) { %>\r\n			<% if ( data.speedcontrol == true ) { %>\r\n				<span class="spp-speed"></span>\r\n			<% } %>\r\n		<% } %>\r\n		<span class="spp-previous"></span>\r\n		<span class="spp-play"></span>\r\n		<span class="spp-next"></span>\r\n	</div>\r\n\r\n	<a href="" class="spp-button spp-show-notes-button">Show Notes</a>\r\n	\r\n</div>'}),r("text!templates/podcast-track-template.html",[],function(){return'<div class="spp-track-row">\r\n	<div class="spp-episode">\r\n		<% if ( data.show_episode_numbers == true ) { %>\r\n			<span class="spp-number"><%= parseInt( data.episode_number, 10) %></span>\r\n			<span class="spp-play"></span>\r\n		<% } else { %>\r\n			<span class="spp-play-hidden-numbers"></span>\r\n			<span class="spp-play"></span>\r\n		<% } %>\r\n	</div>\r\n	<div class="spp-track-title">\r\n		<h3 class="spp-playlist-track-title"><%= data.title_without_episode_number %></h3>\r\n	</div>\r\n</div>'}),r("text!templates/playlist-template.html",[],function(){return'<div class="spp-playlist-header"></div>\r\n<div class="spp-playlist-tracks"></div>\r\n<div class="spp-playlist-footer"></div>'}),r("text!templates/playlist-header-template.html",[],function(){return""}),r("text!templates/playlist-footer-template.html",[],function(){return'<div class="spp-sort-footer">\r\n	<div class="spp-sort"></div>\r\n</div>\r\n<% if ( AP_Player.licensed == true ) { %>\r\n	<div class="spp-playlist-pagination">\r\n		<a href="" class="spp-playlist-prev-page">&lt;</a> <%= data.current_page %> of <%= data.num_pages %> <a href="" class="spp-playlist-next-page">&gt;</a> \r\n	</div>\r\n<% } else { %>\r\n	<div class="spp-logo"></div>\r\n<% } %>\r\n'}),r("text!templates/current-track-template.html",[],function(){return'<div class="spp-current-track-header">\r\n  <div class="spp-track-title-row">\r\n    <h3 class="spp-track-title"><%= title %></h3>\r\n  </div>\r\n\r\n  <div class="spp-progress-row">\r\n    <div class="current-time"><%= current_time %></div>\r\n    <div class="progress-container">\r\n      <div class="progress-icon"></div>\r\n      <div class="progress-bar"></div>\r\n    </div>\r\n    <div class="total-time"><%= duration_time %></div>\r\n  </div>\r\n\r\n  <div class="player-action-row">\r\n    <div class="player-controls">\r\n      <span class="previous-btn"></span>\r\n      <span class="play-pause-btn"></span>\r\n      <span class="next-btn"></span>\r\n    </div>\r\n    <div class="player-download">\r\n      <a href="<%= download_url %>" class="download-btn">Download</a>\r\n      <a href="" class="details-btn">More Details</a>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="current-track-body">\r\n  <div class="track-show-notes">\r\n    <h4 class="show-notes-header">Show Notes</h4>\r\n    <%= show_notes %>\r\n  </div>\r\n  <div class="track-tags">\r\n    <h4 class="tags-header">Tags</h4>\r\n    <ul class="tag-list"></ul>\r\n  </div>\r\n  <div class="track-share">\r\n    <h4 class="share-header">Share This Episode</h4>\r\n    <a href="" class="share-btn twitter-btn">Twitter</a>\r\n    <a href="" class="share-btn fb-btn">Facebook</a>\r\n    <a href="" class="share-btn gplus-btn">Google+</a>\r\n    <a href="mailto:?subject=<%= show_title %>: <%= encodeURIComponent( title ) %>&amp;body=Hi,%0D%0A%0D%0AI thought you might enjoy this episode of <%= show_title %>:%0D%0A%0D%0A <%= permalink_url %> %0D%0A%0D%0AEnjoy!" class="share-btn email-btn" target="_blank">Email</a>\r\n  </div>\r\n  <div class="track-actions">\r\n    <h4 class="action-header">Actions</h4>\r\n    <a href="<%= download_url %>" class="download-btn">Download</a>\r\n  </div>\r\n</div>\r\n<span id="ap-player-logo"></span>'}),r("apps/smart-podcast-player/core/view",["app","text!templates/spp-template.html","text!templates/player-template.html","text!templates/podcast-track-template.html","text!templates/playlist-template.html","text!templates/playlist-header-template.html","text!templates/playlist-footer-template.html","text!templates/current-track-template.html"],function(e,t){return e.module("AskPatPlayerApp.Core.View",function(e,n,i,s,a,r){e.AP_Player=s.Layout.extend({template:r.template(t),regions:{playerRegion:".spp-player-container",trackDetailsRegion:".spp-track-details-container",playlistRegion:".spp-playlist-container"},onRender:function(){this.$(".spp-player-container").show()}})}),e.AskPatPlayerApp.Core.View}),r("entities/podcast-track",["app"],function(e){e.module("Entities",function(e,t,s,a,r,o){var l=[],p=[],u=[],c=[];e.Player=s.Model.extend({defaults:{data:{}}}),e.Track=s.Model.extend({defaults:{data:{active:!1,artwork_url:"",attachments_uri:"",bpm:null,comment_count:0,commentable:!0,created_at:"",current_time:"0:00:00",description:"",download_count:0,download_url:"",downloadable:!0,download:!0,duration:0,duration_time:"0:00:00",episode_number:0,embeddable_by:"all",email:"",fallback_permalink:"",favoritings_count:0,genre:"",id:0,isrc:"",key_signature:"",kind:"track",label_id:null,label_name:"",license:"",method:"file",original_content_size:0,original_format:"mp3",paid:!1,permalink:"",permalink_url:"",playing:!1,playback_count:0,purchase_title:null,purchase_url:null,release:"",release_day:null,release_month:null,release_year:null,sharing:"",show_name:"",state:"",stream_url:"",streamable:!0,subscription:"",tag_list:"",tags:"",tag_string:"",title:"",track_type:"",uri:"",user:{avatar_url:"",id:0,kind:"user",permalink:"",permalink_url:"",uri:"",username:""},user_id:0,video_url:null,waveform_url:"",show_notes:""}}}),e.Tracks=s.Collection.extend({model:e.Track,comparators:{newest:function(e){return-e.get("id")},oldest:function(e){return e.get("id")},mostPopular:function(e){return-e.get("playback_count")},leastPopular:function(e){return e.get("playback_count")}},setComparator:function(e){return this.comparator=this.comparators[e],this},totalPlaybackCount:function(){return this.reduce(function(e,t){var n=t.get("data");return n.playback_count},0)}});var d=function(t){var s,a=t.model.get("options"),o=t.model.get("region"),p=a.stream,u=new Array,d={action:"get_spplayer_tracks",stream:p,episode_limit:a.episode_limit};if(r.ajax({url:AP_Player.ajaxurl,dataType:"json",type:"POST",async:!1,data:d,success:function(e){s=e}}),void 0!=s&&null!=s){var h=s.length;r.each(s,function(s,r){var o=/(?:[^\s"]+|"[^"]*")+/g;if(void 0!==r.tag_list&&""!=r.tag_list.trim()){var l=r.tag_list.match(o);l=l.join(",").replace(/\"|\"|\"|\"/g,"").toLowerCase(),r.tag_string=l,l=l.split(","),r.tags=l}else r.tags=new Array;var p=Math.ceil(r.duration/1e3),c=Math.floor(p/60),d=Math.floor(c/60),f=d,m=c%60,g=p%60;if(r.duration_time=f+":"+i(m,2)+":"+i(g,2),r.playing=!1,r.paid=a.paid,void 0!=a.numbering){var v=a.numbering,y=(v.split("#").length-1,new RegExp("[#]{1,10}")),_=v.replace(y,"([0-9]{0,4})"),w=r.title.match(_);w&&(r.episode_number=w[1]);var b=new RegExp(_,"g");r.title_without_episode_number=r.title.replace(b,"")}else r.title_without_episode_number=r.title,r.episode_number=h;r.show_episode_numbers=a.show_episode_numbers,r.download=a.download,r.social=a.social,r.social_twitter=a.social_twitter,r.social_facebook=a.social_facebook,r.social_gplus=a.social_gplus,r.social_linkedin=a.social_linkedin,r.social_stumble=a.social_stumble,r.social_pinterest=a.social_pinterest,r.social_email=a.social_email,r.poweredby=a.poweredby,r.speedcontrol=a.speedcontrol,r.episode_timer=a.episode_timer,r.show_logo=void 0!==a.show_image?a.show_image:r.artwork_url,r.show_name=a.show_name,r.hashtag=a.hashtag,r.fallback_permalink=void 0!=a.permalink?a.permalink:"",r.email="?subject="+encodeURIComponent(r.title),r.email+="&amp;body=Hi,%0D%0A%0D%0AI thought you might enjoy this ",r.email+=void 0!==r.show_name?"episode of "+r.show_name+":%0D%0A%0D%0A":"podcast:%0D%0A%0D%0A",r.email+=r.title+"%0D%0A",r.email+=a.permalink?a.permalink+"%0D%0A%0D%0AEnjoy!":r.permalink_url+"%0D%0A%0D%0AEnjoy!",r.method=r.permalink_url.indexOf("soundcloud.com")>0?"soundcloud":"file";var k=/\n/g;if("soundcloud"==r.method){r.show_notes="<p>"+r.description+"</p>",r.show_notes=n(r.show_notes),r.show_notes=r.show_notes.replace(k,"</p><p>");var C=/<p>\s*<\/p>/g;r.show_notes=r.show_notes.replace(C,"")}else r.show_notes=r.description;void 0!=t.model.attributes.options.subscription&&(r.subscription=t.model.attributes.options.subscription),r.stream_url=r.stream_url.indexOf("&")>-1?r.stream_url.slice(0,r.stream_url.indexOf("&")):r.stream_url;var P={data:r},M=new e.Track(P),x=M.get("data");x.cid=M.cid,M.set({data:x}),u.push(M),h--})}"oldest"==t.model.attributes.options.sort&&u.reverse(),l[o]=new e.Tracks(u),c[o]=u[0]},h=function(t,n,i){var s=t.model.get("region");if(""==i)u[s]=l[s];else{var a=n.filter(function(e){{var t=e.get("data");t.tags}return o.indexOf(t.tags,i)>-1});u[s]=new e.Tracks(a)}return u[s]},f=function(t,n,i,s){var a=t.model.get("region"),o=new Array,l=(i-1)*s,p=i*s;return r.each(n.models,function(e,t){e>=l&&p>e&&o.push(t)}),u[a]=new e.Tracks(o),u[a]},m=function(e){var t=e.model.get("region");void 0===p[t]&&v(e);var n=p[t].find(function(e){var t=e.attributes.data;return t.playing===!0});if(n)return n;var i,s=e.model.get("options"),a=s.featured_episode,r=p[t].length;return"number"==typeof a&&a>0?(a>r&&(a=r),i="oldest"==s.sort?a-1:r-a):i=0,p[t].models[i]},g=function(e,t){var n=e.find(function(e){var n=e.attributes.data;return n.id===t});return n?n:-1},v=function(e){var t=e.model.get("region");return void 0===p[t]&&(void 0===l[t]&&d(e),p[t]=l[t]),p[t]},y={getTrackEntities:function(e){var t=e.model.get("region");return void 0===l[t]&&d(e),l[t]},getCurrentTrack:function(e){return m(e)},getPagedTracks:function(e,t,n,i){return f(e,t,n,i)},getCurrentTracks:function(e){return v(e)},getTracksByTag:function(e,t,n){var i=e.model.get("region");return u[i]=h(e,t,n),p[i]=u[i],u[i]},setValueAll:function(e,t,n){var i=e.model.get("region");void 0===p[i]&&v(e),l[i].each(function(e){var i=e.get("data");i[t]=n,e.set({data:i})}),p[i].each(function(e){var i=e.get("data");i[t]=n,e.set({data:i})})},setValue:function(e,t,n,i){var s=e.model.get("region");void 0===p[s]&&v(e);var a=g(l[s],t.attributes.data.id),r=g(p[s],t.attributes.data.id),o=p[s].at(p[s].indexOf(r)),u=o.get("data");u[n]=i;var c=(l[s].at(l[s].indexOf(a)),o.get("data"));c[n]=i},setPreviewedTrack:function(e,t){var n=e.model.get("region");c[n]=t},getPreviewedTrack:function(e){var t=e.model.get("region");return c[t]}};t.reqres.setHandler("track:entities",function(e){return y.getTrackEntities(e)}),t.reqres.setHandler("track:entity:current",function(e){return y.getCurrentTrack(e)}),t.reqres.setHandler("track:entities:current",function(e){return y.getCurrentTracks(e)}),t.reqres.setHandler("track:entities:paged",function(e,t,n,i){return y.getPagedTracks(e,t,n,i)}),t.reqres.setHandler("track:entities:tagged",function(e,t,n){return y.getTracksByTag(e,t,n)}),t.reqres.setHandler("track:entities:set",function(e,t,n){y.setValueAll(e,t,n)}),t.reqres.setHandler("track:entity:set",function(e,t,n,i){y.setValue(e,t,n,i)}),t.reqres.setHandler("track:entity:set-previewed",function(e,t){y.setPreviewedTrack(e,t)}),t.reqres.setHandler("track:entity:get-previewed",function(e){return y.getPreviewedTrack(e)})})}),r("entities/podcast-player",["app","entities/podcast-track"],function(e){return e.module("Entities",function(e,t){var n=[],i=function(e){var i=e.model.get("region");n[i]=t.request("track:entity:current",e)},s={getPlayerEntities:function(e){var t=e.model.get("region");return void 0===n[t]&&i(e),n[t]}};t.reqres.setHandler("player:entity",function(e){return s.getPlayerEntities(e)})}),e.Entities}),r("apps/smart-podcast-player/core/controller",["app","apps/smart-podcast-player/core/view","entities/podcast-track","entities/podcast-player","soundmanager2"],function(e,t){return e.module("AskPatPlayerApp.Core",function(e,n,i,s,a){e.Controller={init:function(){a(".smart-podcast-player").each(function(e,s){var r="SPP_"+e,o=new t.AP_Player({model:new i.Model({region:r,options:{stream:a(s).data("stream"),sort:a(s).data("sort"),show_name:a(s).data("showName"),color:a(s).data("color"),link_color:a(s).data("link_color"),numbering:a(s).data("numbering"),show_episode_numbers:a(s).data("show_episode_numbers"),episode_limit:a(s).data("episode_limit"),featured_episode:a(s).data("featured_episode"),download:a(s).data("download"),subscription:a(s).data("subscription"),hide_listens:a(s).data("hide_listens"),show_image:a(s).data("image"),player_uid:a(s).data("uid"),hashtag:a(s).data("hashtag"),social:a(s).data("social"),social_twitter:a(s).data("social_twitter"),social_facebook:a(s).data("social_facebook"),social_gplus:a(s).data("social_gplus"),social_linkedin:a(s).data("social_linkedin"),social_stumble:a(s).data("social_stumble"),social_pinterest:a(s).data("social_pinterest"),social_email:a(s).data("social_email"),poweredby:a(s).data("poweredby"),speedcontrol:a(s).data("speedcontrol"),episode_timer:a(s).data("episode_timer"),permalink:a(s).data("permalink"),current_page:1,tracks_per_page:10,paid:a(s).data("paid"),consumer_key:AP_Player.soundcloudConsumerKey}})}),l=new i.Marionette.Region({el:a(s)});n.regions=n.regions?n.regions:{},n[r]=l,n.trigger("playlist:init",o),n.trigger("track-details:init",o),n.trigger("player:init",o),n[r].show(o);var p="?spp_view=1",u=o.model.get("options");p+="&url="+(void 0!=u.stream?u.stream:""),p+="&sort="+(void 0!=u.sort?encodeURIComponent(u.sort):""),p+="&numbering="+(void 0!=u.numbering?encodeURIComponent(u.numbering):""),p+="&show_episode_numbers="+(void 0!=u.show_episode_numbers?encodeURIComponent(u.show_episode_numbers):""),p+="&download="+(void 0!=u.download?encodeURIComponent(u.download):""),p+="&subscription="+(void 0!=u.subscription?u.subscription:""),p+="&show_name="+(void 0!=u.show_name?encodeURIComponent(u.show_name):""),p+="&image="+(void 0!=u.image?encodeURIComponent(u.image):""),p+="&social="+(void 0!=u.social?encodeURIComponent(u.social):""),p+="&poweredby="+(void 0!=u.poweredby?encodeURIComponent(u.poweredby):""),p+="&speedcontrol="+(void 0!=u.speedcontrol?encodeURIComponent(u.speedcontrol):""),p+="&color="+(void 0!=u.color?encodeURIComponent(u.color):""),p+="&link_color="+(void 0!=u.link_color?encodeURIComponent(u.link_color):""),p+="&subscription="+(void 0!=u.subscription?encodeURIComponent(u.subscription):"")})}}}),e.AskPatPlayerApp.Core.Controller}),r("apps/smart-podcast-player/playlist/view",["app","text!templates/podcast-track-template.html","text!templates/playlist-template.html","text!templates/playlist-header-template.html","text!templates/playlist-footer-template.html"],function(e,t,n,s,a){return e.module("AskPatPlayerApp.Playlist.View",function(e,r,o,l,p,u){e.Track=l.ItemView.extend({template:u.template(t),className:"spp-track",triggers:{"click .spp-play":"track:play","click .spp-track-title":"track:preview"},modelEvents:{change:"render"},events:{},initialize:function(){this.spp_elements={spp:null,loaded_container:null,loaded:null,duration:null,position:null,current_time:null};var e=this.model.get("data"),t="track_"+this.model.cid,n=(e.stream_url+"?consumer_key="+AP_Player.soundcloudConsumerKey,soundManager.getSoundById(t));n||this.createSound()},createSound:function(){var e=this,t=this.model.get("data"),n="track_"+this.model.cid,s=t.stream_url+"?consumer_key="+AP_Player.soundcloudConsumerKey;soundManager.createSound({id:n,url:s,hover:!1,onplay:function(){e.spp_elements.spp=null!==e.spp_elements.spp?e.spp_elements.spp:p(e.$el).parents(".smart-podcast-player"),p(e.spp_elements.spp).addClass("spp-playing")},onresume:function(){e.spp_elements.spp=null!==e.spp_elements.spp?e.spp_elements.spp:p(e.$el).parents(".smart-podcast-player"),p(e.spp_elements.spp).addClass("spp-playing")},onpause:function(){e.spp_elements.spp=null!==e.spp_elements.spp?e.spp_elements.spp:p(e.$el).parents(".smart-podcast-player"),p(e.spp_elements.spp).removeClass("spp-playing")},onfinish:function(){e.trigger("track:next")},whileloading:function(){var t=this.bytesLoaded/this.bytesTotal*100+"%";e.spp_elements.spp=null!==e.spp_elements.spp?e.spp_elements.spp:p(e.$el).parents(".smart-podcast-player"),e.spp_elements.loaded_container=null!==e.spp_elements.loaded_container?e.spp_elements.loaded_container:p(e.spp_elements.spp).find(".spp-loaded-container"),e.spp_elements.loaded=null!==e.spp_elements.loaded?e.spp_elements.loaded:p(e.spp_elements.loaded_container).find(".spp-loaded"),p(e.spp_elements.loaded).cssExtended("width",t,"important")},whileplaying:function(){var n,s,a,r,o=this.durationEstimate,l=this.position,u=o-l;n=l/1e3,s=n/60,a=s/60,r=i(Math.floor(s%60),2)+":"+i(Math.floor(n%60),2),Math.floor(a)>0&&(r=Math.floor(a)+":"+r),n=u/1e3,s=n/60,a=s/60,remaining_time=i(Math.floor(s),2)+":"+i(Math.floor(n%60),2),e.spp_elements.spp=null!==e.spp_elements.spp?e.spp_elements.spp:p(e.$el).parents(".smart-podcast-player"),e.spp_elements.duration=null!==e.spp_elements.duration?e.spp_elements.duration:p(e.spp_elements.spp).find(".spp-duration"),e.spp_elements.current_time=null!==e.spp_elements.current_time?e.spp_elements.current_time:p(e.spp_elements.spp).find(".spp-current-time"),e.spp_elements.position=null!==e.spp_elements.position?e.spp_elements.position:p(e.spp_elements.spp).find(".spp-position"),"none"==t.episode_timer||p(e.spp_elements.duration).text("up"==t.episode_timer?r:"-"+remaining_time);var c=l/o*100;e.trigger("track:progress:update",c),p(e.spp_elements.current_time).cssExtended("width",c+"%","important");var d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);(!p(e.spp_elements.spp).hasClass("hover")||d)&&p(e.spp_elements.position).cssExtended("left",c+"%","important")}})},onRender:function(){var e=this.model.get("data"),t="track_"+this.model.cid;e.active===!0&&this.$el.addClass("active"),this.$el.attr("data-tid",t)}}),e.Tracks=l.CollectionView.extend({itemView:e.Track,className:"spp-track-list",initialize:function(){var e=this;p(window).on("spp_resize",function(){e.resize()})},resize:function(){this.trigger("resize")}}),e.PlaylistRegion=l.Layout.extend({template:u.template(n),className:"spp-playlist",regions:{headerRegion:".spp-playlist-header",tracksRegion:".spp-playlist-tracks",footerRegion:".spp-playlist-footer"}}),e.PlaylistHeader=l.ItemView.extend({template:u.template(s),className:"spp-playlist-header",initialize:function(){this.render()},triggers:{"click h3 span":"tracks:filter","change .spp-playlist-sorter":"tracks:sort"},events:{"click .spp-playlist-tag":"filterTag"},filterTag:function(e){this.trigger("playlist:filter",p(e.currentTarget).text())}}),e.PlaylistFooter=l.ItemView.extend({template:u.template(a),className:"spp-playlist-footer",triggers:{"click .spp-playlist-next-page":"nav:next-page","click .spp-playlist-prev-page":"nav:prev-page","click .spp-sort":"playlist:sort"},initialize:function(){this.render()}})}),e.AskPatPlayerApp.Playlist.View}),r("entities/playlist",["app","entities/podcast-track"],function(e){return e.module("Entities",function(e,t,n){var i=[],s=[];e.PlaylistHeader=n.Model.extend({defaults:{data:{}}}),e.PlaylistFooter=n.Model.extend({defaults:{data:{}}});var a=function(t){var n=t.model.get("region");i[n]=new e.PlaylistHeader({})},r=function(n){var i=t.request("track:entities",n),a=n.model.get("region"),r=n.model.get("options"),o={current_page:r.current_page,num_pages:Math.ceil(i.length/r.tracks_per_page)};s[a]=new e.PlaylistFooter({data:o})},o={getPlaylistHeader:function(e){var t=e.model.get("region");return void 0===i[t]&&a(e),i[t]},getPlaylistFooter:function(e){var t=e.model.get("region");return void 0===s[t]&&r(e),s[t]}};t.reqres.setHandler("playlist:header",function(e){return o.getPlaylistHeader(e)}),t.reqres.setHandler("playlist:footer",function(e){return o.getPlaylistFooter(e)})}),e.Entities}),function(e){function t(){this===s.elem&&(s.pos=[-260,-260],s.elem=!1,a=3)}var n,i,s={pos:[-260,-260]},a=3,r=document,o=r.documentElement,l=r.body;e.event.special.mwheelIntent={setup:function(){var n=e(this).bind("mousewheel",e.event.special.mwheelIntent.handler);return this!==r&&this!==o&&this!==l&&n.bind("mouseleave",t),n=null,!0},teardown:function(){return e(this).unbind("mousewheel",e.event.special.mwheelIntent.handler).unbind("mouseleave",t),!0},handler:function(t){var r=[t.clientX,t.clientY];return this===s.elem||Math.abs(s.pos[0]-r[0])>a||Math.abs(s.pos[1]-r[1])>a?(s.elem=this,s.pos=r,a=250,clearTimeout(i),i=setTimeout(function(){a=10},200),clearTimeout(n),n=setTimeout(function(){a=3},1500),t=e.extend({},t,{type:"mwheelIntent"}),(e.event.dispatch||e.event.handle).apply(this,arguments)):void 0}},e.fn.extend({mwheelIntent:function(e){return e?this.bind("mwheelIntent",e):this.trigger("mwheelIntent")},unmwheelIntent:function(e){return this.unbind("mwheelIntent",e)}}),e(function(){l=r.body,e(r).bind("mwheelIntent.mwheelIntentDefault",e.noop)})}(jQuery),r("mwheel-intent",function(){}),function(e){"function"==typeof r&&r.amd?r("vendor/jquery.mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var r=t||window.event,o=l.call(arguments,1),p=0,u=0,c=0,d=0;if(t=e.event.fix(r),t.type="mousewheel","detail"in r&&(c=-1*r.detail),"wheelDelta"in r&&(c=r.wheelDelta),"wheelDeltaY"in r&&(c=r.wheelDeltaY),"wheelDeltaX"in r&&(u=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(u=-1*c,c=0),p=0===c?u:c,"deltaY"in r&&(c=-1*r.deltaY,p=c),"deltaX"in r&&(u=r.deltaX,0===c&&(p=-1*u)),0!==c||0!==u){if(1===r.deltaMode){var h=e.data(this,"mousewheel-line-height");p*=h,c*=h,u*=h}else if(2===r.deltaMode){var f=e.data(this,"mousewheel-page-height");p*=f,c*=f,u*=f}return d=Math.max(Math.abs(c),Math.abs(u)),(!a||a>d)&&(a=d,i(r,d)&&(a/=40)),i(r,d)&&(p/=40,u/=40,c/=40),p=Math[p>=1?"floor":"ceil"](p/a),u=Math[u>=1?"floor":"ceil"](u/a),c=Math[c>=1?"floor":"ceil"](c/a),t.deltaX=u,t.deltaY=c,t.deltaFactor=a,t.deltaMode=0,o.unshift(t,p,u,c),s&&clearTimeout(s),s=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,o)}}function n(){a=null}function i(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var s,a,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var p=r.length;p;)e.event.fixHooks[r[--p]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var n=o.length;n;)this.addEventListener(o[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),e(jQuery,this),r("vendor/jquery.jscrollpane",function(){}),r("apps/smart-podcast-player/playlist/controller",["app","apps/smart-podcast-player/playlist/view","entities/podcast-track","entities/playlist","vendor/jquery.jscrollpane","vendor/jquery.mousewheel"],function(e,t){return e.module("AskPatPlayerApp.Playlist",function(e,n,i,s,a){var r=[],o=[],l=[],p=[],u=[],c=[],d=[],h=[],f=[];e.Controller={init:function(e){var i=e.model.get("region"),s=e.model.get("options");s.current_page=1,r[i]=void 0===r[i]?n.request("track:entities",e):r[i],o[i]=void 0===o[i]?n.request("track:entities:current",e):o[i],l[i]=void 0===l[i]?n.request("track:entities:paged",e,o[i],s.current_page,s.tracks_per_page):l[i],p[i]=void 0===p[i]?[]:p[i],u[i]=n.request("playlist:header",e),c[i]=n.request("playlist:footer",e);var m=new t.PlaylistRegion({}),g=new t.Tracks({collection:l[i]}),v=new t.PlaylistHeader({model:u[i]}),y=new t.PlaylistFooter({model:c[i]});m.on("show",function(){m.headerRegion.show(v),m.tracksRegion.show(g),m.footerRegion.show(y)}),v.on("playlist:filter",function(t){t=t.replace("×",""),n.trigger("playlist:filter",e,t)}),v.on("show",function(){this.$el.addClass("spp-empty")}),g.on("resize",function(){g.$el.removeData("jsp").removeClass("jspScrollable"),g.$(".jspContainer").remove(),g.$el.attr("style",""),this.render()}),g.on("show",function(){window.innerWidth>768&&this.$el.jScrollPane()}),g.on("playlist:sort",function(){var t=o[i].models;o[i].models=t.reverse();var a=n.request("track:entity:get-previewed",e),r=o[i].indexOf(a),p=Math.floor(r/s.tracks_per_page)+1,u=Math.ceil(o[i].length/s.tracks_per_page);s.current_page=1>p||p>u?1:p,l[i]=n.request("track:entities:paged",e,o[i],s.current_page,s.tracks_per_page),g.collection=l[i],g.render(),y.model.attributes.data.current_page=s.current_page,y.render()}),g.on("render",function(){var e=v.$el.outerHeight();window.innerWidth>768?(this.$el.height(449-e),this.$el.jScrollPane()):this.$el.height("auto")}),g.on("itemview:track:loading",function(e,t){var n=(a(".spp-loaded-container"),a(".spp-loaded"));a(n).width(t)}),g.on("itemview:track:next",function(){o[i]=n.request("track:entities:current",e);var t=n.request("track:entity:current",e);t||(t=o[i].first());var s=o[i].indexOf(t),a=s<o[i].length-1?s+1:0;n.trigger("player:track:play",e,o[i].at(a))}),g.on("itemview:track:play",function(t){n.trigger("player:track:play",e,t.model)}),g.on("itemview:track:preview",function(t){n.trigger("track-details:show",e,t.model),n.request("track:entity:set-previewed",e,t.model)
}),g.on("before:render",function(){g.$el.removeData("jsp").removeClass("jspScrollable"),g.$(".jspContainer").remove()}),g.on("paging:next",function(){o[i]=n.request("track:entities:current",e);var t=Math.ceil(o[i].length/s.tracks_per_page);n.request("track:entities:current",e),s.current_page<t&&(s.current_page=s.current_page+1,l[i]=n.request("track:entities:paged",e,o[i],s.current_page,s.tracks_per_page),g.collection=l[i],g.render()),y.model.attributes.data.current_page=s.current_page,y.render()}),g.on("paging:prev",function(){o[i]=n.request("track:entities:current",e);Math.ceil(o[i].length/s.tracks_per_page);s.current_page>1&&(s.current_page=s.current_page-1,l[i]=n.request("track:entities:paged",e,o[i],s.current_page,s.tracks_per_page),g.collection=l[i],g.render()),y.model.attributes.data.current_page=s.current_page,y.render()}),g.on("paging:goto:track",function(t){o[i]=n.request("track:entities:current",e);var a=(Math.ceil(o[i].length/s.tracks_per_page),o[i].indexOf(t)),r=a+1<o[i].length?a+1:0,p=Math.ceil(r/s.tracks_per_page);s.current_page!=p&&(s.current_page=p,l[i]=n.request("track:entities:paged",e,o[i],s.current_page,s.tracks_per_page),g.collection=l[i],g.render()),y.model.attributes.data.current_page=s.current_page,y.render(),n.trigger("player:track:play",e,t)}),g.on("paging:update",function(){r[i].invoke("set",{playing:!1}),o[i]=n.request("track:entities:current",e);var t=s.current_page,a=s.tracks_per_page,p=n.request("track:entity:current",e);p||(p=o[i].first());var u=o[i].indexOf(p),c=Math.ceil((u+1)/a);c!=t&&(s.current_page=c>0?c:1,l[i]=n.request("track:entities:paged",e,o[i],s.current_page,s.tracks_per_page),g.collection=l[i],g.render(),y.model.attributes.data.current_page=s.current_page,y.render())}),y.on("playlist:sort",function(){var e=this.$(".spp-sort");g.trigger("playlist:sort"),e.hasClass("spp-sort-reverse")||this.$(".spp-sort").addClass("spp-sort-reverse")}),y.on("nav:next-page",function(){g.trigger("paging:next")}),y.on("nav:prev-page",function(){g.trigger("paging:prev")}),y.on("render",function(){var t=e.model.get("options");o[i]=n.request("track:entities:current",e);var s=Math.ceil(o[i].length/t.tracks_per_page);1==t.current_page?a(".spp-playlist-prev-page").addClass("spp-disabled"):a(".spp-playlist-prev-page").removeClass("spp-disabled"),t.current_page==s?a(".spp-playlist-next-page").addClass("spp-disabled"):a(".spp-playlist-next-page").removeClass("spp-disabled")}),y.on("show",function(){var t=e.model.get("options");o[i]=n.request("track:entities:current",e);var s=Math.ceil(o[i].length/t.tracks_per_page);1==t.current_page?this.$(".spp-playlist-prev-page").addClass("spp-disabled"):this.$(".spp-playlist-prev-page").removeClass("spp-disabled"),t.current_page==s?this.$(".spp-playlist-next-page").addClass("spp-disabled"):this.$(".spp-playlist-next-page").removeClass("spp-disabled")}),d[i]=g,h[i]=v,f[i]=y,e.playlistRegion.show(m)},gotoPlaylistTrackPage:function(e,t){var n=e.model.get("region");d[n].trigger("paging:goto:track",t)},updatePaging:function(e){var t=e.model.get("region");d[t].trigger("paging:update")},filter:function(e,t){var i=e.model.get("region"),s=e.model.get("options"),r=a.inArray(t,p[i]);if("-1"==r?p[i].push(t):p[i].splice(r,1),p[i].length<1){h[i].$el.html("").addClass("spp-empty"),o[i]=n.request("track:entities",e),o[i]=n.request("track:entities:tagged",e,o[i],"");{Math.ceil(o[i].length/s.tracks_per_page)}l[i]=n.request("track:entities:paged",e,o[i],1,s.tracks_per_page);var u=Math.ceil(o[i].length/s.tracks_per_page);d[i].collection=l[i],d[i].render(),s.current_page=f[i].model.attributes.data.current_page=1,f[i].model.attributes.data.num_pages=u,f[i].render()}else{var c="";a.each(p[i],function(e,t){c+='<span class="spp-playlist-tag">'+t+'<span class="spp-remove-tag">&times;</span></span>'}),h[i].$el.html(c).removeClass("spp-empty"),o[i]=n.request("track:entities",e),a.each(p[i],function(t,s){o[i]=n.request("track:entities:tagged",e,o[i],s)});{Math.ceil(o[i].length/s.tracks_per_page)}l[i]=n.request("track:entities:paged",e,o[i],1,s.tracks_per_page),o[i]=n.request("track:entities:current",e);var u=Math.ceil(o[i].length/s.tracks_per_page);d[i].collection=l[i],d[i].render(),s.current_page=f[i].model.attributes.data.current_page=1,f[i].model.attributes.data.num_pages=u,f[i].render()}}}}),e.AskPatPlayerApp.Playlist.Controller}),r("text!templates/track-details-template.html",[],function(){return'<div class="spp-track-details-header">\r\n  <a href="" class="spp-currently-playing"><span>&lt;</span> Currently Playing</a>\r\n  <h3 class="spp-track-details-title"><%= data.title %></h3>\r\n  <% var adl = document.createElement(\'a\'); %>\r\n  <% var adloff = /Firefox/i.test(navigator.userAgent); %>\r\n  <% if ( data.download == true && (typeof adl.download != "undefined") && (!adloff) && data.method != \'soundcloud\' ) { %><a class="spp-button spp-button-downloada" href="<%= data.download_url %>" download="<%= data.filename %>">Download</a><% } %>\r\n     <% if ( data.download == true && (typeof adl.download == "undefined" || (adloff) || data.method == \'soundcloud\' ) ) { %><a class="spp-button spp-button-download" href="<%= data.download_url %>" target="_blank">Download</a><% } %>\r\n  <% if ( data.subscription != \'\' ) { %><a class="spp-button spp-button-subscribe" href="<%= data.subscription %>" target="_blank">Subscribe</a><% } %>\r\n</div>\r\n\r\n<div class="spp-track-details-body">\r\n  \r\n  <% if ( data.social == true ) { %>\r\n    <div class="spp-track-details-share">\r\n      <% if ( data.social_twitter == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-twitter">Twitter</a>\r\n      <% } %>    \r\n      <% if ( data.social_facebook == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-facebook">Facebook</a>\r\n      <% } %>    \r\n      <% if ( data.social_gplus == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-gplus">Google+</a>\r\n      <% } %>    \r\n      <% if ( data.social_linkedin == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-linkedin">LinkedIn</a>\r\n      <% } %>    \r\n      <% if ( data.social_stumble == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-stumble">StumbleUpon</a>\r\n      <% } %>    \r\n      <% if ( data.social_pinterest == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-pinterest">Pinterest</a>\r\n      <% } %>    \r\n      <% if ( data.social_email == true ) { %>\r\n          <a href="mailto:<%= data.email %>" id="spp-share-btn" class="spp-share-btn spp-email" target="_blank">Email</a>\r\n      <% } %> \r\n    </div>\r\n  <% } %>    \r\n  \r\n  <div class="spp-track-details-show-notes">\r\n    <%= data.show_notes %>\r\n  </div>\r\n\r\n  <div class="spp-track-details-tags">\r\n    <ul class="spp-tag-list"></ul>\r\n  </div>\r\n\r\n<% if ( data.poweredby == true ) { %>\r\n  <div class="spp-track-details-footer">\r\n    <span class="spp-brand-mark">Powered by the <strong><a href="https://smartpodcastplayer.com/" target="_blank">Smart Podcast Player</a></strong></span>  \r\n  </div>\r\n<% } %>\r\n\r\n  <iframe class="spp-downloader" style="display:none"></iframe>\r\n  \r\n</div>\r\n'}),r("apps/smart-podcast-player/track-details/view",["app","text!templates/track-details-template.html"],function(e,t){return e.module("AskPatPlayerApp.TrackDetails.View",function(e,n,i,s,a,r){e.TrackDetails=s.Layout.extend({template:r.template(t),className:"spp-track-details",triggers:{"click .spp-play-pause-btn":"play","click .spp-button-download":"track:download","click .spp-previous-btn":"track:previous","click .spp-next-btn":"track:next","click .spp-currently-playing":"track:current","click .details-btn":"content:toggle"},events:{"click .spp-player-tag":"filterTag","click .spp-progress-container":"seek","click .spp-share-btn":"share"},initialize:function(){var e=this;a(window).on("spp_resize",function(){e.resize()})},resize:function(){this.trigger("resize")},socialPopup:function(e,t){window.open(t,"pinterest","screenX=100,screenY=100,height=360,width=730"),e.preventDefault(),e.stopPropagation()},share:function(e){var t=this,n=t.model.get("data"),i=a(e.currentTarget),s=""!=n.fallback_permalink&&null!=n.fallback_permalink&&void 0!=n.fallback_permalink?n.fallback_permalink:""!=n.permalink_url?n.permalink_url:"";if(i.hasClass("spp-facebook")&&this.socialPopup(e,"http://www.facebook.com/sharer/sharer.php?m2w&s=100&p[url]="+encodeURIComponent(s)+"&p[images][0]=&p[title]="+encodeURIComponent(n.title)),i.hasClass("spp-twitter")){var r="url="+encodeURIComponent(s)+"&text="+encodeURIComponent(n.title);""!=n.hashtag&&void 0!=n.hashtag&&(r=r+" "+encodeURIComponent("#"+n.hashtag)),this.socialPopup(e,"https://twitter.com/intent/tweet?"+r)}i.hasClass("spp-gplus")&&this.socialPopup(e,"https://plus.google.com/share?url="+encodeURIComponent(s)),i.hasClass("spp-stumble")&&this.socialPopup(e,"http://www.stumbleupon.com/submit?url="+encodeURIComponent(s)+"&title="+encodeURIComponent(n.title)),i.hasClass("spp-pinterest")&&this.socialPopup(e,"https://pinterest.com/pin/create/button/?url="+encodeURIComponent(s)),i.hasClass("spp-linkedin")&&this.socialPopup(e,"https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(s)+"&title="+encodeURIComponent(n.title))},seek:function(e){function t(){n.bytesLoaded/n.bytesTotal>u&&(n.pause(),n.setPosition(u*l),n.spp-play(),clearInterval(p))}var n=soundManager.getSoundById("track_"+this.model.get("id")),i=e.offsetX,s=e.offsetY,r=a(e.currentTarget).width(),o=n.spp-o,l=this.model.get("duration");void 0==i&&(i=e.pageX-this.$(".spp-progress-container").offset().left),void 0==s&&(s=e.pageY-this.$(".spp-progress-container").offset().top);var p,u=i/r;if(n.bytesLoaded/n.bytesTotal>u)n.pause(),n.setPosition(u*l),n.spp-play();else{this.$el.hasClass("playing")||n.spp-play(),n.pause();var c=100*u+"%";a(e.currentTarget).find(".spp-progress-icon").cssExtended("left",c,"important"),p=setInterval(t,250)}},filterTag:function(e){this.trigger("playlist:filter",this,a(e.currentTarget).text())},onRender:function(){var e=this.model.get("data"),t=e.tags,n="";a.each(t,function(e,t){n+='<li class="spp-player-tag">'+t+"</li>"}),this.$(".spp-tag-list").html(n)}})}),e.AskPatPlayerApp.TrackDetails.View}),r("apps/smart-podcast-player/track-details/controller",["app","apps/smart-podcast-player/track-details/view","entities/podcast-track","soundmanager2","vendor/jquery.jscrollpane","vendor/jquery.mousewheel"],function(e,t){return e.module("AskPatPlayerApp.TrackDetails",function(e,n,i,s,a){var r=[];e.Controller={init:function(e){var i=e.model.get("region"),s=(e.model.get("options"),n.request("track:entity:current",e)),o=new t.TrackDetails({model:s});o.on("show",function(){window.innerWidth>768&&o.$el.jScrollPane()}),o.on("playlist:filter",function(t,i){n.trigger("playlist:filter",e,i)}),o.on("resize",function(){window.innerWidth>768&&a(".spp-player .spp-track-details-container").show(),o.$el.removeData("jsp").removeClass("jspScrollable"),o.$el.attr("style","").attr("tabindex",""),o.$(".jspContainer").remove(),o.render(),window.innerWidth>768&&o.$el.jScrollPane()}),o.on("track:download",function(e){var t=e.model.get("data"),n=t.download_url,i=t.download_id;"https:"===location.protocol&&(n=n.replace(/^http:\/\//i,"https://"));var s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(s||"soundcloud"==t.method&&"http:"!==location.protocol)window.location=n+"?consumer_key="+AP_Player.soundcloudConsumerKey;else{if("soundcloud"==t.method)var a=n+"?consumer_key="+AP_Player.soundcloudConsumerKey;else var a=AP_Player.homeUrl+"/?spp_download="+i;e.view.$(".spp-downloader").prop("src",a)}}),o.on("track:current",function(){var t=n.request("track:entity:current",e);o.$el.removeData("jsp").removeClass("jspScrollable"),o.$el.attr("style","").attr("tabindex",""),o.$(".jspContainer").remove(),this.model=t,this.render(),window.innerWidth>768&&this.$el.jScrollPane()}),o.on("render",function(){o.$el.removeClass("spp-current"),window.innerWidth>768?o.$el.jScrollPane():(o.$el.removeData("jsp").removeClass("jspScrollable"),o.$el.attr("style","").attr("tabindex",""),o.$(".jspContainer").remove());var t=n.request("track:entity:current",e);t.attributes.data.id===o.model.attributes.data.id&&o.$el.addClass("spp-current")}),e.trackDetailsRegion.show(o),r[i]=o},show:function(e,t){var n=e.model.get("region"),i=r[n];i.$el.removeData("jsp").removeClass("jspScrollable"),i.$el.attr("style","").attr("tabindex",""),i.$(".jspContainer").remove(),i.model=t,i.render(),window.innerWidth>768&&i.$el.jScrollPane()}}}),e.AskPatPlayerApp.TrackDetails.Controller}),r("apps/smart-podcast-player/player/view",["app","text!templates/player-template.html"],function(e,t){return e.module("AskPatPlayerApp.Player.View",function(e,n,s,a,r,o){e.Player=a.ItemView.extend({template:o.template(t),className:"spp-player",triggers:{"click .spp-play":"track:play","click .spp-next":"track:next","click .spp-previous":"track:previous","click .spp-speed":"track:speed","click .spp-show-notes-button":"track:show-notes"},events:{"mousemove .spp-track":"cursorMove","mouseout .spp-track":"cursorOut","click .spp-track":"seek"},initialize:function(){this.hover=!1;var e=this;r(window).on("spp_resize",function(){e.resize()}),this.spp_elements={spp:null,loaded_container:null,loaded:null,duration:null,position:null,current_time:null}},resize:function(){this.trigger("resize")},seek:function(e){this.trigger("track:seek",e)},cursorMove:function(e){this.trigger("cursor:move",e)},cursorOut:function(e){this.trigger("cursor:out",e)},onRender:function(){var e="track_"+this.model.cid,t=soundManager.getSoundById(e);if(!t){var n=this.model.get("data"),s=n.stream_url+"?consumer_key="+AP_Player.soundcloudConsumerKey,a=this;soundManager.createSound({id:e,url:s,hover:!1,onplay:function(){a.spp_elements.spp=null!==a.spp_elements.spp?a.spp_elements.spp:r(a.$el).parents(".smart-podcast-player"),r(a.spp_elements.spp).addClass("spp-playing")},onresume:function(){a.spp_elements.spp=null!==a.spp_elements.spp?a.spp_elements.spp:r(a.$el).parents(".smart-podcast-player"),r(a.spp_elements.spp).addClass("spp-playing")},onpause:function(){a.spp_elements.spp=null!==a.spp_elements.spp?a.spp_elements.spp:r(a.$el).parents(".smart-podcast-player"),r(a.spp_elements.spp).removeClass("spp-playing")},whileloading:function(){var e=this.bytesLoaded/this.bytesTotal*100+"%";a.spp_elements.spp=null!==a.spp_elements.spp?a.spp_elements.spp:r(a.$el).parents(".smart-podcast-player"),a.spp_elements.loaded_container=null!==a.spp_elements.loaded_container?a.spp_elements.loaded_container:r(a.spp_elements.spp).find(".spp-loaded-container"),a.spp_elements.loaded=null!==a.spp_elements.loaded?a.spp_elements.loaded:r(a.spp_elements.loaded_container).find(".spp-loaded"),r(a.spp_elements.loaded).cssExtended("width",e,"important")},whileplaying:function(){var e,t,s,o,l=this.durationEstimate,p=this.position,u=l-p;e=p/1e3,t=e/60,s=t/60,o=i(Math.floor(t%60),2)+":"+i(Math.floor(e%60),2),Math.floor(s)>0&&(o=Math.floor(s)+":"+o),e=u/1e3,t=e/60,s=t/60,remaining_time=i(Math.floor(t),2)+":"+i(Math.floor(e%60),2),a.spp_elements.spp=null!==a.spp_elements.spp?a.spp_elements.spp:r(a.$el).parents(".smart-podcast-player"),a.spp_elements.duration=null!==a.spp_elements.duration?a.spp_elements.duration:r(a.spp_elements.spp).find(".spp-duration"),a.spp_elements.current_time=null!==a.spp_elements.current_time?a.spp_elements.current_time:r(a.spp_elements.spp).find(".spp-current-time"),a.spp_elements.position=null!==a.spp_elements.position?a.spp_elements.position:r(a.spp_elements.spp).find(".spp-position"),"none"==n.episode_timer||r(a.spp_elements.duration).text("up"==n.episode_timer?o:"-"+remaining_time);var c=p/l*100;a.trigger("track:progress:update",c),r(a.spp_elements.current_time).cssExtended("width",c+"%","important");var d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);(!r(a.spp_elements.spp).hasClass("hover")||d)&&r(a.spp_elements.position).cssExtended("left",c+"%","important")}})}}})}),e.AskPatPlayerApp.Player.View}),r("apps/smart-podcast-player/player/controller",["app","apps/smart-podcast-player/player/view","entities/podcast-player","entities/podcast-track","soundmanager2"],function(e,t){return e.module("AskPatPlayerApp.Player",function(e,n,i,s,a){var r=[],o=[],l=[];e.Controller={init:function(e){var i=e.model.get("region"),s=e.model.get("options"),p=n.request("player:entity",e);l[i]=new t.Player({model:p});var u=0,c=n.request("track:entities",e);c.each(function(e){var t=e.get("data");u+="number"==typeof t.playback_count?t.playback_count:0}),l[i].on("resize",function(){var e=l[i].model.get("data");if(window.innerWidth>768){var t=l[i].$el.outerWidth();null===e.show_logo||void 0===e.show_logo||""===e.show_logo?t=t:t-=100,l[i].$(".spp-track").css({width:t+"px"}),l[i].$(".spp-show-logo").show()}else l[i].$(".spp-track").css({width:"100%"}),l[i].$(".spp-show-logo").hide()}),l[i].on("track:show-notes",function(){this.$el.parents(".smart-podcast-player").find(".spp-track-details-container").is(":visible")?(this.$el.parents(".smart-podcast-player").find(".spp-track-details-container").hide(),l[i].$(".spp-show-notes-button").text("Show Notes")):(this.$el.parents(".smart-podcast-player").find(".spp-track-details-container").show(),l[i].$(".spp-show-notes-button").text("Hide Notes"))}),l[i].on("show",function(){var e=l[i].model.get("data");if(window.innerWidth>768){var t=l[i].$el.outerWidth();null===e.show_logo||void 0===e.show_logo||""===e.show_logo?t=t:t-=100,l[i].$(".spp-track").css({width:t+"px"}),l[i].$(".spp-show-logo").show()}else l[i].$(".spp-track").css({width:"100%"}),l[i].$(".spp-show-logo").hide();var n=!1;if("undefined"!=typeof s.hide_listens&&1==s.hide_listens&&(n=!0),u&&!n){var a=u.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" Listens";""!=e.show_name&&void 0!==e.show_name&&(a=" • "+a),l[i].$(".spp-show-count").text(a)}}),l[i].on("render",function(){var e=l[i].model.get("data");if(window.innerWidth>768){var t=l[i].$el.outerWidth();null===e.show_logo||void 0===e.show_logo||""===e.show_logo?t=t:t-=100,l[i].$(".spp-track").css({width:t+"px"}),l[i].$(".spp-show-logo").show()}else l[i].$(".spp-track").css({width:"100%"}),l[i].$(".spp-show-logo").hide();var n=!1;if("undefined"!=typeof s.hide_listens&&1==s.hide_listens&&(n=!0),u&&!n){var a=u.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" Listens";""!=e.show_name&&void 0!==e.show_name&&(a=" • "+a),l[i].$(".spp-show-count").text(a)}}),l[i].on("track:play",function(t){var i=this.$el.hasClass("spp-playing"),s=(t.model.get("data"),"track_"+t.model.cid);a(".spp-track, .smart-track-player").removeClass("spp-playing"),i?(a(".spp-player").removeClass("spp-playing"),this.$(".spp-player-playlist .spp-track").removeClass("spp-active"),soundManager.pauseAll(),n.request("track:entities:set",e,"playing",!1)):(soundManager.pauseAll(),soundManager.play(s),this.$el.addClass("spp-playing"),n.request("track:entities:set",e,"playing",!1),n.request("track:entity:set",e,t.model,"playing",!0),a('.spp-track[data-tid="'+s+'"]').addClass("spp-playing"))}),l[i].on("track:speed",function(t){var i=this.$el.hasClass("spp-playing"),s=(t.model.get("data"),"track_"+t.model.cid),r=soundManager.getSoundById(s);a(".spp-track, .smart-track-player").removeClass("spp-playing"),i||(soundManager.pauseAll(),soundManager.play(s),this.$el.addClass("spp-playing"),n.request("track:entities:set",e,"playing",!1),n.request("track:entity:set",e,t.model,"playing",!0),a('.spp-track[data-tid="'+s+'"]').addClass("spp-playing")),r.isHTML5&&(.5==r._a.playbackRate?(this.$el.hasClass("spp-speeding-half")&&this.$el.removeClass("spp-speeding-half"),r._a.playbackRate=1):1==r._a.playbackRate?(this.$el.addClass("spp-speeding-onehalf"),r._a.playbackRate=1.5):1.5==r._a.playbackRate?(this.$el.hasClass("spp-speeding-onehalf")&&this.$el.removeClass("spp-speeding-onehalf"),this.$el.addClass("spp-speeding-two"),r._a.playbackRate=2):2==r._a.playbackRate?(this.$el.hasClass("spp-speeding-two")&&this.$el.removeClass("spp-speeding-two"),this.$el.addClass("spp-speeding-three"),r._a.playbackRate=3):3==r._a.playbackRate?(this.$el.hasClass("spp-speeding-three")&&this.$el.removeClass("spp-speeding-three"),this.$el.addClass("spp-speeding-half"),r._a.playbackRate=.5):r._a.playbackRate=1)}),l[i].on("track:seek",function(t){function s(){u.bytesLoaded/u.bytesTotal>m&&(u.setPosition(m*u.durationEstimate),u.play(),clearInterval(f))}if(window.innerWidth>768){var r=this.$el.hasClass("spp-playing"),o=l[i].model.get("data"),p="track_"+l[i].model.cid;r||(soundManager.pauseAll(),soundManager.play(p),this.$el.addClass("spp-playing"),n.request("track:entities:set",e,"playing",!1),n.request("track:entity:set",e,ItemView.model,"playing",!0),a('.spp-track[data-tid="'+p+'"]').addClass("spp-playing"));{var u=soundManager.getSoundById("track_"+l[i].model.cid),c=l[i].$(".spp-track").offset(),d=t.pageX-c.left,h=a(t.currentTarget).outerWidth();u.position,o.durationEstimate}void 0==d&&(d=t.pageX-this.$(".spp-track").offset().left);var f,m=d/h;u.bytesLoaded/u.bytesTotal>m?(u.pause(),u.setPosition(m*u.durationEstimate),u.play()):(this.$el.hasClass("spp-playing")||u.play(),u.pause(),f=setInterval(s,250))}}),l[i].on("cursor:move",function(e){if(window.innerWidth>768){l[i].$el.addClass("spp-hover");var t=l[i].$(".spp-track").offset(),n=e.pageX-t.left;this.$(".spp-position").cssExtended("left",n+"px","important")}}),l[i].on("cursor:out",function(){if(window.innerWidth>768){var e=l[i].model.get("data"),t=soundManager.getSoundById("track_"+l[i].model.cid);if(t){var n=t.position,s=e.duration,a=n/s*100;l[i].$(".spp-position").cssExtended("left",a+"%","important")}l[i].$el.removeClass("spp-hover")}}),l[i].on("track:next",function(t){var p=t.model,u=(p.get("data"),"track_"+p.cid);soundManager.pauseAll(),soundManager.unload(u),a(".spp-player").removeClass("spp-playing"),r[i]=n.request("track:entities:current",e),o[i]=n.request("track:entities:paged",e,r[i],s.current_page,s.tracks_per_page);var c=r[i].indexOf(p),d=c+1,h=r[i].length-1,f=r[i].at(h>d?d:0);n.trigger("playlist:paging:track",e,f),l[i].trigger("track:update",f)}),l[i].on("track:previous",function(t){var a=t.model,p=(a.get("data"),"track_"+a.cid);soundManager.pauseAll(),soundManager.unload(p),r[i]=n.request("track:entities:current",e),o[i]=n.request("track:entities:paged",e,r[i],s.current_page,s.tracks_per_page);var u=r[i].indexOf(a),c=u-1,d=r[i].length-1,h=r[i].at(0>c?d:c);n.trigger("playlist:paging:track",e,h),l[i].trigger("track:update",h)}),l[i].on("track:update",function(t){{var s=(t.get("data"),"track_"+t.cid),r=(l[i].model.get("data"),"track_"+l[i].model.cid);this.$el.hasClass("spp-playing")}a(".spp-player").removeClass("spp-playing"),a(".spp-track").removeClass("spp-active"),r==s?l[i].trigger("track:play",this):(a('.spp-track[data-tid="'+r+'"]').addClass("spp-active"),soundManager.pauseAll(),soundManager.unload(r),l[i].model=t,l[i].render(),l[i].trigger("track:play",this),n.trigger("playlist:paging:update",e),n.trigger("track-details:show",e,t))}),e.playerRegion.show(l[i])},playTrack:function(e,t){var n=e.model.get("region");l[n].trigger("track:update",t)}}}),e.AskPatPlayerApp.Player.Controller}),r("apps/smart-podcast-player/app",["app"],function(e){return e.module("AskPatPlayerApp",function(e,t){var n={initCore:function(e){a(["apps/smart-podcast-player/core/controller"],function(t){t.init(e)})},initPlaylist:function(e){a(["apps/smart-podcast-player/playlist/controller"],function(t){t.init(e)})},updatePlaylistPaging:function(e){a(["apps/smart-podcast-player/playlist/controller"],function(t){t.updatePaging(e)})},gotoPlaylistTrackPage:function(e,t){a(["apps/smart-podcast-player/playlist/controller"],function(n){n.gotoPlaylistTrackPage(e,t)})},filterPlaylist:function(e,t){a(["apps/smart-podcast-player/playlist/controller"],function(n){n.filter(e,t)})},initTrackDetails:function(e){a(["apps/smart-podcast-player/track-details/controller"],function(t){t.init(e)})},showTrack:function(e,t){a(["apps/smart-podcast-player/track-details/controller"],function(n){n.show(e,t)})},initPlayer:function(e){a(["apps/smart-podcast-player/player/controller"],function(t){t.init(e)})},playTrack:function(e,t){a(["apps/smart-podcast-player/player/controller"],function(n){n.playTrack(e,t)})}};t.on("app:core:init",function(){n.initCore()}),t.on("player:track:play",function(e,t){n.playTrack(e,t)}),t.on("player:init",function(e){n.initPlayer(e)}),t.on("playlist:paging:update",function(e){n.updatePlaylistPaging(e)}),t.on("playlist:paging:track",function(e,t){n.gotoPlaylistTrackPage(e,t)}),t.on("playlist:init",function(e){n.initPlaylist(e)}),t.on("playlist:filter",function(e,t){n.filterPlaylist(e,t)}),t.on("track-details:init",function(e){n.initTrackDetails(e)}),t.on("track-details:show",function(e,t){n.showTrack(e,t)})}),e.PlaylistApp}),r("app",["jquery","marionette","soundmanager2"],function(e,t){var n=new t.Application;return n.options={},n.options.current_page=1,n.options.tracks_per_page=10,n.on("initialize:after",function(){(jQuery(".smart-podcast-player").length>0||jQuery(".smart-track-player").length>0)&&a(["apps/smart-podcast-player/app"],function(){soundManager.setup({flashVersion:9,useHighPerformance:!0,wmode:"transparent",useHTML5Audio:!0,preferFlash:!1,onready:function(){n.trigger("app:core:init")}})})}),n}),r("text!templates/track-template.html",[],function(){return'<% if ( data.show_logo != undefined && data.show_logo != null ) { %>\r\n	<div class="spp-show-logo">\r\n		<img src="<%= data.show_logo %>" alt="<%= data.show_name %>" />\r\n	</div>\r\n<% } %>\r\n\r\n<div class="spp-track">\r\n	<% if ( data.artist != undefined && data.artist != null ) { %>\r\n		<h4 class="spp-artist"><div class="spp-artist-box">\r\n			<span class="spp-artist-first"><%= data.artist %></span>\r\n			<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n			<span class="spp-artist-second"><%= data.artist %></span>\r\n			<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n		</div></p>\r\n	<% } %>		\r\n\r\n	<h3 class="spp-track-title"><div class="spp-track-title-box">\r\n		<span class="spp-track-title-first"><%= data.title %></span>\r\n		<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n		<span class="spp-track-title-second"><%= data.title %></span>\r\n		<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n	</div></h3>\r\n	<p class="spp-duration"></p>\r\n	\r\n	<div class="spp-progress">\r\n		<div class="spp-current-time"></div>\r\n		<div class="spp-position"></div>\r\n		<div class="spp-total-time"></div>\r\n	</div>\r\n\r\n	<div class="spp-loaded-container">\r\n		<div class="spp-loaded"></div>\r\n	</div>\r\n\r\n	<div class="spp-controls">\r\n		<% if ( data.paid == true ) { %>\r\n			<% if ( data.speedcontrol == true ) { %>\r\n				<span class="spp-speed"></span>\r\n			<% } %>\r\n			 <% if ( data.social == true ) { %>\r\n				<span class="spp-share">\r\n					<div class="spp-share-options">\r\n						<% if ( data.social_twitter == true ) { %>\r\n							<a href="" class="spp-share-icon spp-twitter-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_facebook == true ) { %>\r\n							<a href="" class="spp-share-icon spp-fb-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_gplus == true ) { %>\r\n							<a href="" class="spp-share-icon spp-gplus-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_linkedin == true ) { %>\r\n							<a href="" class="spp-share-icon spp-linkedin-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_stumble == true ) { %>\r\n							<a href="" class="spp-share-icon spp-stumble-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_pinterest == true ) { %>\r\n							<a href="" class="spp-share-icon spp-pinterest-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_email == true ) { %>\r\n							<a href="" class="spp-share-icon spp-email-btn">Share</a>\r\n						<% } %>\r\n					</div>\r\n				</span>\r\n			<% } %>\r\n		<% } %>\r\n\r\n	   <% var adl = document.createElement(\'a\'); %>\r\n	   <% var adloff = /Firefox/i.test(navigator.userAgent); %>\r\n\r\n	   <% if ( data.download == true && (typeof adl.download != "undefined")  && (!adloff) && data.method != \'soundcloud\' ) { %><a href="<%= data.url %>" download="<%= data.filename %>"><span class="spp-dloada"></span></a><% } %>\r\n	   <% if ( data.download == true && (typeof adl.download == "undefined" || (adloff) || data.method == \'soundcloud\' ) ) { %><span class="spp-dload"></span><% } %>\r\n		<span class="spp-play"></span>\r\n	</div>\r\n\r\n	<iframe class="spp-downloader" style="display:none"></iframe>\r\n	\r\n</div>\r\n\r\n<%if ( data.paid != true ) { %>\r\n	<div class="spp-logo"></div>\r\n<% } %>\r\n'}),t(jQuery),r("style",function(){}),r("apps/smart-track-player/player/view",["app","text!templates/track-template.html","style"],function(e,t){return e.module("SmartTrackPlayerApp.Player.View",function(e,n,s,a,r,o){e.Player=a.ItemView.extend({template:o.template(t),className:"smart-track-player",events:{"mousemove .spp-track":"cursorMove","mouseout .spp-track":"cursorOut","click .spp-position":"seek","click .spp-play":"play","click .spp-button-download":"download","click .spp-dload":"download","click .spp-speed":"speed","hover .spp-play":"shareOut","hover .spp-button-download":"shareOut","hover .spp-dload":"shareOut","hover .spp-dloada":"shareOut","hover .spp-speed":"shareOut","hover .spp-share":"shareOn","hover .spp-share-options":"shareOn","click .spp-share":"shareOn","click .spp-share-icon":"share","mouseleave .spp-controls":"shareOut"},initialize:function(){this.hover=!1;var e=this;r(window).on("resize",function(){e.resize()})},download:function(e){e.preventDefault();var t=this.model.get("data"),n=t.download_url,i=t.download_id;"https:"===location.protocol&&(n=n.replace(/^http:\/\//i,"https://"));var s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(s||"soundcloud"==t.method&&"http:"!==location.protocol){if("soundcloud"==t.method)var a=n+"?consumer_key="+AP_Player.soundcloudConsumerKey;else var a=n;window.location=a}else{if("soundcloud"==t.method)var a=n+"?consumer_key="+AP_Player.soundcloudConsumerKey;else var a=AP_Player.homeUrl+"/?spp_download="+i;this.$(".spp-downloader").prop("src",a)}},resize:function(){var e=this.model.get("data");if(window.innerWidth>768){var t=this.$el.parent().width();null===e.show_logo||void 0===e.show_logo||(t-=80),this.$(".spp-track").css({width:t+"px"}),this.$(".spp-track").css({"max-width":t+"px"})}else this.$(".spp-track").css({"max-width":"100%"}),this.$(".spp-track").css({width:"100%"})},socialPopup:function(e,t){window.open(t,"pinterest","screenX=100,screenY=100,height=360,width=730"),e.preventDefault(),e.stopPropagation()},shareOn:function(){this.$(".spp-share-options").cssExtended("display","block","important")},shareOut:function(){this.$(".spp-share-options").cssExtended("display","none","important")},share:function(e){var t=this,n=t.model.get("data"),i=r(e.currentTarget),s=window.location.href;if((i.hasClass("spp-facebook")||i.hasClass("spp-fb-btn"))&&this.socialPopup(e,"http://www.facebook.com/sharer/sharer.php?m2w&s=100&p[url]="+encodeURIComponent(s)+"&p[images][0]=&p[title]="+encodeURIComponent(n.title)),i.hasClass("spp-twitter")||i.hasClass("spp-twitter-btn")){var a="url="+encodeURIComponent(s)+"&text="+encodeURIComponent(n.title);""!=n.hashtag&&void 0!=n.hashtag&&(a=a+" "+encodeURIComponent("#"+n.hashtag)),this.socialPopup(e,"https://twitter.com/intent/tweet?"+a)}(i.hasClass("spp-gplus")||i.hasClass("spp-gplus-btn"))&&this.socialPopup(e,"https://plus.google.com/share?url="+encodeURIComponent(s)),(i.hasClass("spp-stumble")||i.hasClass("spp-stumble-btn"))&&this.socialPopup(e,"http://www.stumbleupon.com/submit?url="+encodeURIComponent(s)+"&title="+encodeURIComponent(n.title)),(i.hasClass("spp-pinterest")||i.hasClass("spp-pinterest-btn"))&&this.socialPopup(e,"https://pinterest.com/pin/create/button/?url="+encodeURIComponent(s)),(i.hasClass("spp-linkedin")||i.hasClass("spp-linkedin-btn"))&&this.socialPopup(e,"https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(s)+"&title="+encodeURIComponent(n.title))
},stop:function(){this.$el.removeClass("spp-playing")},seek:function(e){function t(){s.bytesLoaded/s.bytesTotal>d&&(u=null!==s.duration?s.duration:s.durationEstimate,a.pause(),s.setPosition(d*u),a.play(),clearInterval(c))}if(r(window).outerWidth()>768){var n=this.model.get("data"),i="smart_track_"+n.track_uid+"_"+this.model.cid,s=soundManager.getSoundById(i),a=this;void 0===s&&(s=this.createSound(),s.load());var o=this.$(".spp-track").offset(),l=e.pageX-o.left,p=this.$(".spp-track").outerWidth(),u=null!==s.duration?s.duration:s.durationEstimate;void 0==l&&(l=e.pageX-this.$(".spp-track").offset().left);var c,d=l/p;s.bytesLoaded/s.bytesTotal>d&&null!==u?(u=null!==s.duration?s.duration:s.durationEstimate,this.$el.hasClass("spp-playing")&&this.pause(),s.setPosition(d*u),this.play()):(this.pause(),c=setInterval(t,250))}},cursorMove:function(e){if(this.trigger("cursor:move",e),window.innerWidth>768){this.hover=!0;var t=this.$(".spp-track").offset(),n=e.pageX-t.left;this.$(".spp-position").cssExtended("left",n+"px","important")}},cursorOut:function(){if(window.innerWidth>768){var e=this.model.get("data"),t="smart_track_"+e.track_uid+"_"+this.model.cid,n=soundManager.getSoundById(t);if(n){var i=n.position,s=n.duration,a=i/s*100;this.$(".spp-position").cssExtended("left",a+"%","important")}this.hover=!1}},onRender:function(){{var e=this.model.get("data");"smart_track_"+e.track_uid+"_"+this.model.cid}if(window.innerWidth>768){var t=0;this.$el.parent().length>0&&(t=this.$el.parent().width()),0==t&&r(".smart-track-player").each(function(){var n=this.attributes["data-uid"];n&&n.value===e.track_uid&&(t=r(this).parent().width())}),0==t&&(t=r(".smart-track-player").first().parent().width()),null===e.show_logo||void 0===e.show_logo||(t-=80),this.$(".spp-track").css({width:t+"px"}),this.$(".spp-track").css({"max-width":t+"px"})}else this.$(".spp-track").css({"max-width":"100%"}),this.$(".spp-track").css({width:"100%"}),this.$(".spp-track").css({"max-width":"100%"}),this.$(".spp-show-logo").hide();void 0!==e.download&&this.$el.addClass("spp-has-download"),void 0!==e.color&&this.$el.addClass("stp-color-"+e.color),void 0!==e.get&&0!=e.get&&"file"==e.method&&this.fetchTrackData(e.url)},fetchTrackData:function(e){var t=this,n={action:"fetch_track_data",url:e};console.log("Getting track data"),r.post(AP_Player.ajaxurl,n,function(e){var n=t.model.get("data");e=JSON.parse(e),"0"!=e?(void 0===typeof e.title||void 0!=n.title&&'Getting file data<span class="spp-loading-ellipsis">...</span>'!=n.title||(n.title=e.title),void 0!==typeof e.artist&&void 0==n.artist&&(n.artist=e.artist),n.get=!1,t.model.set({data:n}),void 0!==typeof e.title&&t.$(".spp-track-title").text(n.title),void 0!==typeof e.artist&&(t.$(".spp-artist").length>0?t.$(".spp-artist").text(n.artist):t.$(".spp-track-title").before('<p class="spp-artist">'+n.artist+"</p>")),void 0!=t.loading_timer&&clearInterval(t.loading_timer),t.render()):(n.title="Unable to retrieve track data",n.get=!1,t.model.set({data:n}),t.render())})},pause:function(){var e=this.model.get("data"),t="smart_track_"+e.track_uid+"_"+this.model.cid,n=soundManager.getSoundById(t);n.pause(),this.$el.removeClass("spp-playing")},speed:function(){var e=this.model.get("data"),t="smart_track_"+e.track_uid+"_"+this.model.cid,n=soundManager.getSoundById(t);if(void 0===n)n=this.createSound(),this.play();else{var i=this.$el.hasClass("spp-playing");i||this.play()}n.isHTML5&&(.5==n._a.playbackRate?(this.$el.hasClass("spp-speeding-half")&&this.$el.removeClass("spp-speeding-half"),n._a.playbackRate=1):1==n._a.playbackRate?(this.$el.addClass("spp-speeding-onehalf"),n._a.playbackRate=1.5):1.5==n._a.playbackRate?(this.$el.hasClass("spp-speeding-onehalf")&&this.$el.removeClass("spp-speeding-onehalf"),this.$el.addClass("spp-speeding-two"),n._a.playbackRate=2):2==n._a.playbackRate?(this.$el.hasClass("spp-speeding-two")&&this.$el.removeClass("spp-speeding-two"),this.$el.addClass("spp-speeding-three"),n._a.playbackRate=3):3==n._a.playbackRate?(this.$el.hasClass("spp-speeding-three")&&this.$el.removeClass("spp-speeding-three"),this.$el.addClass("spp-speeding-half"),n._a.playbackRate=.5):n._a.playbackRate=1)},play:function(){var e=this.$el.hasClass("spp-playing"),t=this.model.get("data"),n="smart_track_"+t.track_uid+"_"+this.model.cid,i=soundManager.getSoundById(n);void 0===i&&(i=this.createSound()),r(".spp-track").removeClass("spp-playing"),e?(this.$el.removeClass("spp-playing"),soundManager.pauseAll()):(soundManager.pauseAll(),i.play(),this.$el.addClass("spp-playing"))},createSound:function(){var e=this,t=this.model,n=t.get("data"),s="smart_track_"+n.track_uid+"_"+this.model.cid,a=soundManager.createSound({id:s,url:n.url,onload:function(){},onresume:function(){},onplay:function(){},onid3:function(){},onfinish:function(){e.stop()},whileloading:function(){var t=this.bytesLoaded/this.bytesTotal*100+"%";e.$(".spp-loaded").cssExtended("width",t,"important")},whileplaying:function(){var t,s,a,r,o=this.durationEstimate,l=this.position,p=o-l;t=l/1e3,s=t/60,a=s/60,r=i(Math.floor(s%60),2)+":"+i(Math.floor(t%60),2),Math.floor(a)>0&&(r=Math.floor(a)+":"+r),t=p/1e3,s=t/60,a=s/60,remaining_time=i(Math.floor(s),2)+":"+i(Math.floor(t%60),2),"none"==n.episode_timer||e.$(".spp-duration").text("up"==n.episode_timer?r:"-"+remaining_time);var u=l/o*100;e.$(".spp-current-time").cssExtended("width",u+"%","important"),e.hover===!1&&e.$(".spp-position").cssExtended("left",u+"%","important")}});return a}})}),e.SmartTrackPlayerApp.Player.View}),r("entities/player-track",["app"],function(e){e.module("Entities",function(e,t,n){e.Player=n.Model.extend({defaults:{data:{}}}),e.Track=n.Model.extend({defaults:{data:{active:!1,artwork_url:"",attachments_uri:"",bpm:null,comment_count:0,commentable:!0,created_at:"",current_time:"0:00:00",description:"",download_count:0,download_url:"",downloadable:!0,duration:0,duration_time:"0:00:00",episode_number:0,embeddable_by:"all",favoritings_count:0,filename:"",genre:"",id:0,isrc:"",key_signature:"",kind:"track",label_id:null,label_name:"",license:"",original_content_size:0,original_format:"mp3",permalink:"",permalink_url:"",playing:!1,playback_count:0,purchase_title:null,purchase_url:null,release:"",release_day:null,release_month:null,release_year:null,sharing:"",show_name:"",state:"",stream_url:"",streamable:!0,tag_list:"",tags:"",tag_string:"",title:"",track_type:"",uri:"",user:{avatar_url:"",id:0,kind:"user",permalink:"",permalink_url:"",uri:"",username:""},user_id:0,video_url:null,waveform_url:"",show_notes:""}}})})}),r("entities/player",["app","entities/player-track"],function(e){return e.module("Entities",function(e,t){var n=[],i=function(e){var i=e.model.get("region");n[i]=t.request("track:entity:current",e)},s={getPlayerEntities:function(e){var t=e.model.get("region");return void 0===n[t]&&i(e),n[t]}};t.reqres.setHandler("player:entity",function(e){return s.getPlayerEntities(e)})}),e.Entities}),r("apps/smart-track-player/player/controller",["app-player","apps/smart-track-player/player/view","entities/player","entities/player-track","soundmanager2"],function(e,t){return e.module("SmartTrackPlayerApp.Player",function(e,n,i,s,a){e.Controller={init:function(){var e=[];a(".smart-track-player").each(function(t,n){var i=a(n).data("url");i.indexOf("soundcloud.com")>-1&&e.push(i)});var e=[];a(".smart-track-player").each(function(t,n){var i=a(n).data("url");i.indexOf("soundcloud.com")>-1&&e.push(i)});var n="";if(e.length>0){var s={action:"get_soundcloud_track",streams:e};a.ajax({url:AP_Player.ajaxurl,dataType:"json",async:!1,type:"POST",data:s,success:function(e){n=e}})}a(".smart-track-player").each(function(e,s){var r=a(s).data("url"),o={url:r,track_uid:a(s).data("uid"),show_logo:a(s).data("image"),download:a(s).data("download"),download_url:r,color:a(s).data("color"),title:a(s).data("title"),artist:a(s).data("artist"),filename:"",social:a(s).data("social"),social_twitter:a(s).data("social_twitter"),social_facebook:a(s).data("social_facebook"),social_gplus:a(s).data("social_gplus"),social_linkedin:a(s).data("social_linkedin"),social_stumble:a(s).data("social_stumble"),social_pinterest:a(s).data("social_pinterest"),social_email:a(s).data("social_email"),speedcontrol:a(s).data("speedcontrol"),paid:a(s).data("paid"),get:a(s).data("get"),method:"file",sticky:a(s).data("sticky"),episode_timer:a(s).data("episode_timer"),download_id:a(s).data("download_id")},l=document.createElement("a");l.href=r;var p=l.hostname,u=p.indexOf("soundcloud.com")>-1;if(u){var c=n.shift();o.method="soundcloud",o.url=c.stream_url+"?consumer_key="+AP_Player.soundcloudConsumerKey,o.title=o.title?o.title:c.title,o.download_url=c.download_url,o.filename=c.permalink+".mp3"}else void 0!=o.get&&void 0==o.title&&(o.title='Getting file data<span class="spp-loading-ellipsis">...</span>'),o.filename=o.url.replace(/^.*[\\\/]/,"");var d=new i.Model({data:o}),h=new t.Player({model:d});if(u||h.on("render",function(){if(this.$(".spp-loading-ellipsis").length>0){var e=this,t=0;this.loading_timer=setInterval(function(){t++;var n=new Array(t%5).join(".");e.$(".spp-loading-ellipsis").text("."+n)},300)}}),h.render(),"undefined"!=typeof o.sticky&&(h.$el.attr("id","spp-sticky"),a(s).wrap('<div id="spp-sticky-container"></div>'),"string"==typeof o.sticky)){var f=o.sticky.match(/^(-?\d+)px$/);if(f&&f.length>1){var m=parseInt(f[1]);h.$el.addClass("number"==typeof m?"spp-sticky-top-"+m:"spp-sticky-top-0")}}a(s).after(h.$el),a(s).remove();var g=h.$el[0],v=g.getElementsByClassName("spp-artist-first")[0],y=g.getElementsByClassName("spp-artist")[0];if(v&&v.offsetWidth>y.clientWidth){var _=y.getElementsByClassName("spp-artist-box")[0];_.className=_.className+" spp-marquee";var w=g.getElementsByClassName("spp-artist-second")[0];a(w).cssExtended("visibility","visible","important")}var b=g.getElementsByClassName("spp-track-title-first")[0],k=g.getElementsByClassName("spp-track-title")[0];if(b.offsetWidth>k.clientWidth){var C=k.getElementsByClassName("spp-track-title-box")[0];C.className=C.className+" spp-marquee";var w=g.getElementsByClassName("spp-track-title-second")[0];a(w).cssExtended("visibility","visible","important")}})}}}),e.SmartTrackPlayerApp.Player.Controller}),r("apps/smart-track-player/app",["app-player"],function(e){return e.module("SmartTrackPlayerApp",function(e,t){var n={initPlayer:function(){a(["apps/smart-track-player/player/controller"],function(e){e.init()})}};t.on("player:init",function(){n.initPlayer()})}),e.SmartTrackPlayerApp}),r("app-player",["marionette","soundmanager2"],function(e){var t=new e.Application;return t.options={},t.on("initialize:after",function(){jQuery(".smart-track-player").length>0&&a(["apps/smart-track-player/app"],function(){soundManager.setup({flashVersion:9,wmode:"transparent",useHTML5Audio:!0,preferFlash:!1,onready:function(){t.trigger("player:init")}})})}),t}),"function"==typeof jQuery&&r("jquery",function(){return jQuery}),"function"==typeof _&&r("underscore",function(){return _}),a.config({name:"AP_Player_App",baseUrl:"/wp-content/plugins/smart-podcast-player/assets/js/",urlArgs:"bust="+(new Date).getTime(),paths:{backbone:"vendor/amdjs/backbone","backbone.wreqr":"vendor/amdjs/backbone.wreqr","backbone.babysitter":"vendor/amdjs/backbone.babysitter",marionette:"vendor/amdjs/marionette",soundmanager2:"vendor/soundmanager2-nodebug-jsmin","mwheel-intent":"vendor/mwheelIntent",style:"vendor/style"},shim:{soundmanager2:{exports:"soundManager"},"vendor/jquery.mousewheel":["jquery","mwheel-intent"],"vendor/jquery.jscrollpane":["jquery","vendor/jquery.mousewheel","mwheel-intent"]}}),a(["jquery","app"],function(n,i){function s(){var e=n("#spp-sticky-container");if(0!=e.length){var t=n("#spp-sticky"),i=e.offset().top,a=n(window).scrollTop(),r=t.hasClass("spp-sticking");if("undefined"==typeof s.top_when_sticking){for(var o=t.get(0).className.split(/\s+/),l=0;l<o.length;l++){var p=o[l].match(/spp-sticky-top-(-?\d+)/);p&&p.length>1&&(s.top_when_sticking=parseInt(p[1]))}"number"!=typeof s.top_when_sticking&&(s.top_when_sticking=0)}!r&&a>i-s.top_when_sticking?(t.addClass("spp-sticking"),t.detach(),e.after(t),t.cssExtended("width",e.css("width"),"important"),t.cssExtended("top",s.top_when_sticking+"px","important")):r&&i-s.top_when_sticking>a&&(t.removeClass("spp-sticking"),t.detach(),e.append(t),t.cssExtended("top","0px","important"))}}function a(){var e=n("#spp-sticky-container");if(0!=e.length){var t=n("#spp-sticky");t.cssExtended("width",e.css("width"),"important")}}var r=jQuery(window).width(),o=jQuery(window).height();jQuery(window).on("resize",function(){(r!=jQuery(window).width()||o!=jQuery(window).height())&&(r=jQuery(window).width(),o=jQuery(window).height(),jQuery(window).trigger("spp_resize"))}),n(window).resize(function(){n(".smart-podcast-player").each(function(){var e=n(this).parent(),t=n(e).width(),i=n(window).width();768>t||768>i?e.addClass("spp-player-small"):e.removeClass("spp-player-small")})}),n(".smart-podcast-player").each(function(){var e=n(this).parent(),t=n(e).width(),i=n(window).width();(768>t||768>i)&&e.addClass("spp-player-small")}),n(function(){n(window).scroll(s)}),n(function(){n(window).resize(a)}),t(n),e(jQuery,this),i.start()}),a(["jquery","app-player"],function(n,i){jQuery(".smart-track-player ").length>0&&(t(n),e(jQuery,this),i.start())}),r("main",function(){})}();